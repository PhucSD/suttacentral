{% from 'macros.html' import time_tag with context %}

{% extends "base.html" -%}
{% block content %}

<div id="onecol" class="tools">

<div class="report">

<h1>{{ report.title }}</h1>
<p>{{report.header}}</p>
Show:
<input type="radio" name="hide" value="nothing" checked> All
<input type="radio" name="hide" value="okay"> Problems
<input type="radio" name="hide" value="warnings"> Errors

<ul>
{% for entry in report %}
    <li class="entry {{'even' if loop.index % 2 == 0 else 'odd'}}
    {{- ' warnings' if entry.warnings else '' }}{{ ' errors' if entry.errors else ''}}"> <span class="summary">{{entry.summary}}</span>
    {% if entry.messages %}
        <ul>
            {% for cls, msg in entry.messages %}
            {% if cls == 'heading' %}
            <li class="{{cls}} {{'even' if loop.index % 2 == 0 else 'odd'}}">{{msg|e}}</li>
            {% else %}
            <li class="{{cls}} {{'even' if loop.index % 2 == 0 else 'odd'}}">{{cls|title}}: {{msg|e}}</li>
            {% endif %}
            {% endfor %}
        </ul>
    {% endif %}
{% endfor %}
</ul>

{% if report.processed_bytes == 0 %}
<p>Processing failed.</p>
{% else %}
<p>Download your file <a class="result" href="{{report.result.url}}">{{report.result.filename}} ({{report.result.size}})</a></p>
{% endif %}
<p>{{report.footer}}</p>



</div>

</div>

{%- endblock %}
