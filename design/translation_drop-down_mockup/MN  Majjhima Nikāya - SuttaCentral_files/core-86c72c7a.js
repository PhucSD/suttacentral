(function(){"use strict";var _camelizeCssPropName=function(){var matcherRegex=/\-([a-z])/g,replacerFn=function(match,group){return group.toUpperCase();};return function(prop){return prop.replace(matcherRegex,replacerFn);};}();var _getStyle=function(el,prop){var value,camelProp,tagName,possiblePointers,i,len;if(window.getComputedStyle){value=window.getComputedStyle(el,null).getPropertyValue(prop);}else{camelProp=_camelizeCssPropName(prop);if(el.currentStyle){value=el.currentStyle[camelProp];}else{value=el.style[camelProp];}}
if(prop==="cursor"){if(!value||value==="auto"){tagName=el.tagName.toLowerCase();possiblePointers=["a"];for(i=0,len=possiblePointers.length;i<len;i++){if(tagName===possiblePointers[i]){return"pointer";}}}}
return value;};var _elementMouseOver=function(event){if(!ZeroClipboard.prototype._singleton)return;if(!event){event=window.event;}
var target;if(this!==window){target=this;}else if(event.target){target=event.target;}else if(event.srcElement){target=event.srcElement;}
ZeroClipboard.prototype._singleton.setCurrent(target);};var _addEventHandler=function(element,method,func){if(element.addEventListener){element.addEventListener(method,func,false);}else if(element.attachEvent){element.attachEvent("on"+method,func);}};var _removeEventHandler=function(element,method,func){if(element.removeEventListener){element.removeEventListener(method,func,false);}else if(element.detachEvent){element.detachEvent("on"+method,func);}};var _addClass=function(element,value){if(element.addClass){element.addClass(value);return element;}
if(value&&typeof value==="string"){var classNames=(value||"").split(/\s+/);if(element.nodeType===1){if(!element.className){element.className=value;}else{var className=" "+element.className+" ",setClass=element.className;for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c];}}
element.className=setClass.replace(/^\s+|\s+$/g,"");}}}
return element;};var _removeClass=function(element,value){if(element.removeClass){element.removeClass(value);return element;}
if(value&&typeof value==="string"||value===undefined){var classNames=(value||"").split(/\s+/);if(element.nodeType===1&&element.className){if(value){var className=(" "+element.className+" ").replace(/[\n\t]/g," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
element.className=className.replace(/^\s+|\s+$/g,"");}else{element.className="";}}}
return element;};var _getZoomFactor=function(){var rect,physicalWidth,logicalWidth,zoomFactor=1;if(typeof document.body.getBoundingClientRect==="function"){rect=document.body.getBoundingClientRect();physicalWidth=rect.right-rect.left;logicalWidth=document.body.offsetWidth;zoomFactor=Math.round(physicalWidth/logicalWidth*100)/100;}
return zoomFactor;};var _getDOMObjectPosition=function(obj){var info={left:0,top:0,width:0,height:0,zIndex:999999999};var zi=_getStyle(obj,"z-index");if(zi&&zi!=="auto"){info.zIndex=parseInt(zi,10);}
if(obj.getBoundingClientRect){var rect=obj.getBoundingClientRect();var pageXOffset,pageYOffset,zoomFactor;if("pageXOffset"in window&&"pageYOffset"in window){pageXOffset=window.pageXOffset;pageYOffset=window.pageYOffset;}else{zoomFactor=_getZoomFactor();pageXOffset=Math.round(document.documentElement.scrollLeft/zoomFactor);pageYOffset=Math.round(document.documentElement.scrollTop/zoomFactor);}
var leftBorderWidth=document.documentElement.clientLeft||0;var topBorderWidth=document.documentElement.clientTop||0;info.left=rect.left+pageXOffset-leftBorderWidth;info.top=rect.top+pageYOffset-topBorderWidth;info.width="width"in rect?rect.width:rect.right-rect.left;info.height="height"in rect?rect.height:rect.bottom-rect.top;}
return info;};var _noCache=function(path,options){var useNoCache=!(options&&options.useNoCache===false);if(useNoCache){return(path.indexOf("?")===-1?"?":"&")+"nocache="+new Date().getTime();}else{return"";}};var _vars=function(options){var str=[];var origins=[];if(options.trustedOrigins){if(typeof options.trustedOrigins==="string"){origins.push(options.trustedOrigins);}else if(typeof options.trustedOrigins==="object"&&"length"in options.trustedOrigins){origins=origins.concat(options.trustedOrigins);}}
if(options.trustedDomains){if(typeof options.trustedDomains==="string"){origins.push(options.trustedDomains);}else if(typeof options.trustedDomains==="object"&&"length"in options.trustedDomains){origins=origins.concat(options.trustedDomains);}}
if(origins.length){str.push("trustedOrigins="+encodeURIComponent(origins.join(",")));}
if(typeof options.amdModuleId==="string"&&options.amdModuleId){str.push("amdModuleId="+encodeURIComponent(options.amdModuleId));}
if(typeof options.cjsModuleId==="string"&&options.cjsModuleId){str.push("cjsModuleId="+encodeURIComponent(options.cjsModuleId));}
return str.join("&");};var _inArray=function(elem,array){if(array.indexOf){return array.indexOf(elem);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i;}}
return-1;};var _prepGlue=function(elements){if(typeof elements==="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!elements.length)return[elements];return elements;};var _dispatchCallback=function(func,element,instance,args,async){if(async){window.setTimeout(function(){func.call(element,instance,args);},0);}else{func.call(element,instance,args);}};var ZeroClipboard=function(elements,options){if(elements)(ZeroClipboard.prototype._singleton||this).glue(elements);if(ZeroClipboard.prototype._singleton)return ZeroClipboard.prototype._singleton;ZeroClipboard.prototype._singleton=this;this.options={};for(var kd in _defaults)this.options[kd]=_defaults[kd];for(var ko in options)this.options[ko]=options[ko];this.handlers={};if(ZeroClipboard.detectFlashSupport())_bridge();};var currentElement,gluedElements=[];ZeroClipboard.prototype.setCurrent=function(element){currentElement=element;this.reposition();var titleAttr=element.getAttribute("title");if(titleAttr){this.setTitle(titleAttr);}
var useHandCursor=this.options.forceHandCursor===true||_getStyle(element,"cursor")==="pointer";_setHandCursor.call(this,useHandCursor);return this;};ZeroClipboard.prototype.setText=function(newText){if(newText&&newText!==""){this.options.text=newText;if(this.ready())this.flashBridge.setText(newText);}
return this;};ZeroClipboard.prototype.setTitle=function(newTitle){if(newTitle&&newTitle!=="")this.htmlBridge.setAttribute("title",newTitle);return this;};ZeroClipboard.prototype.setSize=function(width,height){if(this.ready())this.flashBridge.setSize(width,height);return this;};ZeroClipboard.prototype.setHandCursor=function(enabled){enabled=typeof enabled==="boolean"?enabled:!!enabled;_setHandCursor.call(this,enabled);this.options.forceHandCursor=enabled;return this;};var _setHandCursor=function(enabled){if(this.ready())this.flashBridge.setHandCursor(enabled);};ZeroClipboard.version="1.2.3";var _defaults={moviePath:"ZeroClipboard.swf",trustedOrigins:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:true,forceHandCursor:false};ZeroClipboard.setDefaults=function(options){for(var ko in options)_defaults[ko]=options[ko];};ZeroClipboard.destroy=function(){ZeroClipboard.prototype._singleton.unglue(gluedElements);var bridge=ZeroClipboard.prototype._singleton.htmlBridge;bridge.parentNode.removeChild(bridge);delete ZeroClipboard.prototype._singleton;};ZeroClipboard.detectFlashSupport=function(){var hasFlash=false;if(typeof ActiveXObject==="function"){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){hasFlash=true;}}catch(error){}}
if(!hasFlash&&navigator.mimeTypes["application/x-shockwave-flash"]){hasFlash=true;}
return hasFlash;};var _amdModuleId=null;var _cjsModuleId=null;var _bridge=function(){var flashBridge,len;var client=ZeroClipboard.prototype._singleton;var container=document.getElementById("global-zeroclipboard-html-bridge");if(!container){var opts={};for(var ko in client.options)opts[ko]=client.options[ko];opts.amdModuleId=_amdModuleId;opts.cjsModuleId=_cjsModuleId;var flashvars=_vars(opts);var html='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+client.options.moviePath+_noCache(client.options.moviePath,client.options)+'"/>         <param name="allowScriptAccess" value="'+client.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+flashvars+'"/>         <embed src="'+client.options.moviePath+_noCache(client.options.moviePath,client.options)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+flashvars+'"           scale="exactfit">         </embed>       </object>';container=document.createElement("div");container.id="global-zeroclipboard-html-bridge";container.setAttribute("class","global-zeroclipboard-container");container.setAttribute("data-clipboard-ready",false);container.style.position="absolute";container.style.left="-9999px";container.style.top="-9999px";container.style.width="15px";container.style.height="15px";container.style.zIndex="9999";container.innerHTML=html;document.body.appendChild(container);}
client.htmlBridge=container;flashBridge=document["global-zeroclipboard-flash-bridge"];if(flashBridge&&(len=flashBridge.length)){flashBridge=flashBridge[len-1];}
client.flashBridge=flashBridge||container.children[0].lastElementChild;};ZeroClipboard.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top="-9999px";this.htmlBridge.removeAttribute("title");this.htmlBridge.removeAttribute("data-clipboard-text");_removeClass(currentElement,this.options.activeClass);currentElement=null;this.options.text=null;return this;};ZeroClipboard.prototype.ready=function(){var ready=this.htmlBridge.getAttribute("data-clipboard-ready");return ready==="true"||ready===true;};ZeroClipboard.prototype.reposition=function(){if(!currentElement)return false;var pos=_getDOMObjectPosition(currentElement);this.htmlBridge.style.top=pos.top+"px";this.htmlBridge.style.left=pos.left+"px";this.htmlBridge.style.width=pos.width+"px";this.htmlBridge.style.height=pos.height+"px";this.htmlBridge.style.zIndex=pos.zIndex+1;this.setSize(pos.width,pos.height);return this;};ZeroClipboard.dispatch=function(eventName,args){ZeroClipboard.prototype._singleton.receiveEvent(eventName,args);};ZeroClipboard.prototype.on=function(eventName,func){var events=eventName.toString().split(/\s/g);for(var i=0;i<events.length;i++){eventName=events[i].toLowerCase().replace(/^on/,"");if(!this.handlers[eventName])this.handlers[eventName]=func;}
if(this.handlers.noflash&&!ZeroClipboard.detectFlashSupport()){this.receiveEvent("onNoFlash",null);}
return this;};ZeroClipboard.prototype.addEventListener=ZeroClipboard.prototype.on;ZeroClipboard.prototype.off=function(eventName,func){var events=eventName.toString().split(/\s/g);for(var i=0;i<events.length;i++){eventName=events[i].toLowerCase().replace(/^on/,"");for(var event in this.handlers){if(event===eventName&&this.handlers[event]===func){delete this.handlers[event];}}}
return this;};ZeroClipboard.prototype.removeEventListener=ZeroClipboard.prototype.off;ZeroClipboard.prototype.receiveEvent=function(eventName,args){eventName=eventName.toString().toLowerCase().replace(/^on/,"");var element=currentElement;var performCallbackAsync=true;switch(eventName){case"load":if(args&&parseFloat(args.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10){this.receiveEvent("onWrongFlash",{flashVersion:args.flashVersion});return;}
this.htmlBridge.setAttribute("data-clipboard-ready",true);break;case"mouseover":_addClass(element,this.options.hoverClass);break;case"mouseout":_removeClass(element,this.options.hoverClass);this.resetBridge();break;case"mousedown":_addClass(element,this.options.activeClass);break;case"mouseup":_removeClass(element,this.options.activeClass);break;case"datarequested":var targetId=element.getAttribute("data-clipboard-target"),targetEl=!targetId?null:document.getElementById(targetId);if(targetEl){var textContent=targetEl.value||targetEl.textContent||targetEl.innerText;if(textContent)this.setText(textContent);}else{var defaultText=element.getAttribute("data-clipboard-text");if(defaultText)this.setText(defaultText);}
performCallbackAsync=false;break;case"complete":this.options.text=null;break;}
if(this.handlers[eventName]){var func=this.handlers[eventName];if(typeof func==="string"&&typeof window[func]==="function"){func=window[func];}
if(typeof func==="function"){_dispatchCallback(func,element,this,args,performCallbackAsync);}}};ZeroClipboard.prototype.glue=function(elements){elements=_prepGlue(elements);for(var i=0;i<elements.length;i++){if(_inArray(elements[i],gluedElements)==-1){gluedElements.push(elements[i]);_addEventHandler(elements[i],"mouseover",_elementMouseOver);}}
return this;};ZeroClipboard.prototype.unglue=function(elements){elements=_prepGlue(elements);for(var i=0;i<elements.length;i++){_removeEventHandler(elements[i],"mouseover",_elementMouseOver);var arrayIndex=_inArray(elements[i],gluedElements);if(arrayIndex!=-1)gluedElements.splice(arrayIndex,1);}
return this;};if(typeof define==="function"&&define.amd){define(["require","exports","module"],function(require,exports,module){_amdModuleId=module&&module.id||null;return ZeroClipboard;});}else if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports){_cjsModuleId=module.id||null;module.exports=ZeroClipboard;}else{window.ZeroClipboard=ZeroClipboard;}})();if(!$.browser){$.browser={msie:document.documentMode!=undefined};}
(function($,e,b){var c="hashchange",h=document,f,g=$.event.special,i=h.documentMode,d="on"+c in e&&(i===b||i>7);function a(j){j=j||location.href;return"#"+j.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[c]=function(j){return j?this.bind(c,j):this.trigger(c)};$.fn[c].delay=50;g[c]=$.extend(g[c],{setup:function(){if(d){return false}$(f.start)},teardown:function(){if(d){return false}$(f.stop)}});f=(function(){var j={},p,m=a(),k=function(q){return q},l=k,o=k;j.start=function(){p||n()};j.stop=function(){p&&clearTimeout(p);p=b};function n(){var r=a(),q=o(m);if(r!==m){l(m=r,q);$(e).trigger(c)}else{if(q!==m){location.href=location.href.replace(/#.*/,"")+q}}p=setTimeout(n,$.fn[c].delay)}$.browser.msie&&!d&&(function(){var q,r;j.start=function(){if(!q){r=$.fn[c].src;r=r&&r+a();q=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){r||l(a());n()}).attr("src",r||"javascript:0").insertAfter("body")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName==="title"){q.document.title=h.title}}catch(s){}}}};j.stop=k;o=function(){return a(q.location.href)};l=function(v,s){var u=q.document,t=$.fn[c].domain;if(v!==s){u.title=h.title;u.open();t&&u.write('<script>document.domain="'+t+'"<\/script>');u.close();q.location.hash=v}}})();return j})()})(jQuery,this);(function(a){a.easytabs=function(j,e){var f=this,q=a(j),i={animate:true,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:true,cycle:false,collapsible:false,collapsedClass:"collapsed",collapsedByDefault:true,uiTabs:false,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:true,event:"click",panelContext:q},h,l,v,m,d,t={fast:200,normal:400,slow:600},r;f.init=function(){f.settings=r=a.extend({},i,e);r.bind_str=r.event+".easytabs";if(r.uiTabs){r.tabActiveClass="ui-tabs-selected";r.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all";r.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all";r.tabClass="ui-state-default ui-corner-top";r.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"}if(r.collapsible&&e.defaultTab!==undefined&&e.collpasedByDefault===undefined){r.collapsedByDefault=false}if(typeof(r.animationSpeed)==="string"){r.animationSpeed=t[r.animationSpeed]}a("a.anchor").remove().prependTo("body");q.data("easytabs",{});f.setTransitions();f.getTabs();b();g();w();n();c();q.attr("data-easytabs",true)};f.setTransitions=function(){v=(r.animate)?{show:r.transitionIn,hide:r.transitionOut,speed:r.animationSpeed,collapse:r.transitionCollapse,uncollapse:r.transitionUncollapse,halfSpeed:r.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}};f.getTabs=function(){var x;f.tabs=q.find(r.tabs),f.panels=a(),f.tabs.each(function(){var A=a(this),z=A.children("a"),y=A.children("a").data("target");A.data("easytabs",{});if(y!==undefined&&y!==null){A.data("easytabs").ajax=z.attr("href")}else{y=z.attr("href")}y=y.match(/#([^\?]+)/)[1];x=r.panelContext.find("#"+y);if(x.length){x.data("easytabs",{position:x.css("position"),visibility:x.css("visibility")});x.not(r.panelActiveClass).hide();f.panels=f.panels.add(x);A.data("easytabs").panel=x}else{f.tabs=f.tabs.not(A);if("console"in window){console.warn("Warning: tab without matching panel for selector '#"+y+"' removed from set")}}})};f.selectTab=function(x,C){var y=window.location,B=y.hash.match(/^[^\?]*/)[0],z=x.parent().data("easytabs").panel,A=x.parent().data("easytabs").ajax;if(r.collapsible&&!d&&(x.hasClass(r.tabActiveClass)||x.hasClass(r.collapsedClass))){f.toggleTabCollapse(x,z,A,C)}else{if(!x.hasClass(r.tabActiveClass)||!z.hasClass(r.panelActiveClass)){o(x,z,A,C)}else{if(!r.cache){o(x,z,A,C)}}}};f.toggleTabCollapse=function(x,y,z,A){f.panels.stop(true,true);if(u(q,"easytabs:before",[x,y,r])){f.tabs.filter("."+r.tabActiveClass).removeClass(r.tabActiveClass).children().removeClass(r.tabActiveClass);if(x.hasClass(r.collapsedClass)){if(z&&(!r.cache||!x.parent().data("easytabs").cached)){q.trigger("easytabs:ajax:beforeSend",[x,y]);y.load(z,function(C,B,D){x.parent().data("easytabs").cached=true;q.trigger("easytabs:ajax:complete",[x,y,C,B,D])})}x.parent().removeClass(r.collapsedClass).addClass(r.tabActiveClass).children().removeClass(r.collapsedClass).addClass(r.tabActiveClass);y.addClass(r.panelActiveClass)[v.uncollapse](v.speed,r.transitionUncollapseEasing,function(){q.trigger("easytabs:midTransition",[x,y,r]);if(typeof A=="function"){A()}})}else{x.addClass(r.collapsedClass).parent().addClass(r.collapsedClass);y.removeClass(r.panelActiveClass)[v.collapse](v.speed,r.transitionCollapseEasing,function(){q.trigger("easytabs:midTransition",[x,y,r]);if(typeof A=="function"){A()}})}}};f.matchTab=function(x){return f.tabs.find("[href='"+x+"'],[data-target='"+x+"']").first()};f.matchInPanel=function(x){return(x&&f.validId(x)?f.panels.filter(":has("+x+")").first():[])};f.validId=function(x){return x.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)};f.selectTabFromHashChange=function(){var y=window.location.hash.match(/^[^\?]*/)[0],x=f.matchTab(y),z;if(r.updateHash){if(x.length){d=true;f.selectTab(x)}else{z=f.matchInPanel(y);if(z.length){y="#"+z.attr("id");x=f.matchTab(y);d=true;f.selectTab(x)}else{if(!h.hasClass(r.tabActiveClass)&&!r.cycle){if(y===""||f.matchTab(m).length||q.closest(y).length){d=true;f.selectTab(l)}}}}}};f.cycleTabs=function(x){if(r.cycle){x=x%f.tabs.length;$tab=a(f.tabs[x]).children("a").first();d=true;f.selectTab($tab,function(){setTimeout(function(){f.cycleTabs(x+1)},r.cycle)})}};f.publicMethods={select:function(x){var y;if((y=f.tabs.filter(x)).length===0){if((y=f.tabs.find("a[href='"+x+"']")).length===0){if((y=f.tabs.find("a"+x)).length===0){if((y=f.tabs.find("[data-target='"+x+"']")).length===0){if((y=f.tabs.find("a[href$='"+x+"']")).length===0){a.error("Tab '"+x+"' does not exist in tab set")}}}}}else{y=y.children("a").first()}f.selectTab(y)}};var u=function(A,x,z){var y=a.Event(x);A.trigger(y,z);return y.result!==false};var b=function(){q.addClass(r.containerClass);f.tabs.parent().addClass(r.tabsClass);f.tabs.addClass(r.tabClass);f.panels.addClass(r.panelClass)};var g=function(){var y=window.location.hash.match(/^[^\?]*/)[0],x=f.matchTab(y).parent(),z;if(x.length===1){h=x;r.cycle=false}else{z=f.matchInPanel(y);if(z.length){y="#"+z.attr("id");h=f.matchTab(y).parent()}else{h=f.tabs.parent().find(r.defaultTab);if(h.length===0){a.error("The specified default tab ('"+r.defaultTab+"') could not be found in the tab set ('"+r.tabs+"') out of "+f.tabs.length+" tabs.")}}}l=h.children("a").first();p(x)};var p=function(z){var y,x;if(r.collapsible&&z.length===0&&r.collapsedByDefault){h.addClass(r.collapsedClass).children().addClass(r.collapsedClass)}else{y=a(h.data("easytabs").panel);x=h.data("easytabs").ajax;if(x&&(!r.cache||!h.data("easytabs").cached)){q.trigger("easytabs:ajax:beforeSend",[l,y]);y.load(x,function(B,A,C){h.data("easytabs").cached=true;q.trigger("easytabs:ajax:complete",[l,y,B,A,C])})}h.data("easytabs").panel.show().addClass(r.panelActiveClass);h.addClass(r.tabActiveClass).children().addClass(r.tabActiveClass)}q.trigger("easytabs:initialised",[l,y])};var w=function(){f.tabs.children("a").bind(r.bind_str,function(x){r.cycle=false;d=false;f.selectTab(a(this));x.preventDefault?x.preventDefault():x.returnValue=false})};var o=function(z,D,E,H){f.panels.stop(true,true);if(u(q,"easytabs:before",[z,D,r])){var A=f.panels.filter(":visible"),y=D.parent(),F,x,C,G,B=window.location.hash.match(/^[^\?]*/)[0];if(r.animate){F=s(D);x=A.length?k(A):0;C=F-x}m=B;G=function(){q.trigger("easytabs:midTransition",[z,D,r]);if(r.animate&&r.transitionIn=="fadeIn"){if(C<0){y.animate({height:y.height()+C},v.halfSpeed).css({"min-height":""})}}if(r.updateHash&&!d){window.location.hash="#"+D.attr("id")}else{d=false}D[v.show](v.speed,r.transitionInEasing,function(){y.css({height:"","min-height":""});q.trigger("easytabs:after",[z,D,r]);if(typeof H=="function"){H()}})};if(E&&(!r.cache||!z.parent().data("easytabs").cached)){q.trigger("easytabs:ajax:beforeSend",[z,D]);D.load(E,function(J,I,K){z.parent().data("easytabs").cached=true;q.trigger("easytabs:ajax:complete",[z,D,J,I,K])})}if(r.animate&&r.transitionOut=="fadeOut"){if(C>0){y.animate({height:(y.height()+C)},v.halfSpeed)}else{y.css({"min-height":y.height()})}}f.tabs.filter("."+r.tabActiveClass).removeClass(r.tabActiveClass).children().removeClass(r.tabActiveClass);f.tabs.filter("."+r.collapsedClass).removeClass(r.collapsedClass).children().removeClass(r.collapsedClass);z.parent().addClass(r.tabActiveClass).children().addClass(r.tabActiveClass);f.panels.filter("."+r.panelActiveClass).removeClass(r.panelActiveClass);D.addClass(r.panelActiveClass);if(A.length){A[v.hide](v.speed,r.transitionOutEasing,G)}else{D[v.uncollapse](v.speed,r.transitionUncollapseEasing,G)}}};var s=function(z){if(z.data("easytabs")&&z.data("easytabs").lastHeight){return z.data("easytabs").lastHeight}var B=z.css("display"),y,x;try{y=a("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(A){y=a("<div></div>",{visibility:"hidden",overflow:"hidden"})}x=z.wrap(y).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight();z.unwrap();z.css({position:z.data("easytabs").position,visibility:z.data("easytabs").visibility,display:B});z.data("easytabs").lastHeight=x;return x};var k=function(y){var x=y.outerHeight();if(y.data("easytabs")){y.data("easytabs").lastHeight=x}else{y.data("easytabs",{lastHeight:x})}return x};var n=function(){if(typeof a(window).hashchange==="function"){a(window).hashchange(function(){f.selectTabFromHashChange()})}else{if(a.address&&typeof a.address.change==="function"){a.address.change(function(){f.selectTabFromHashChange()})}}};var c=function(){var x;if(r.cycle){x=f.tabs.index(h);setTimeout(function(){f.cycleTabs(x+1)},r.cycle)}};f.init()};a.fn.easytabs=function(c){var b=arguments;return this.each(function(){var e=a(this),d=e.data("easytabs");if(undefined===d){d=new a.easytabs(this,c);e.data("easytabs",d)}if(d.publicMethods[c]){return d.publicMethods[c](Array.prototype.slice.call(b,1))}})}})(jQuery);(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));$.fn.scrollLock=function(){return $(this).on("DOMMouseScroll mousewheel",function(h){var g=$(this),f=this.scrollTop,d=this.scrollHeight,b=g.height(),i=h.originalEvent.wheelDelta,a=i>0,c=function(){h.stopPropagation();h.preventDefault();h.returnValue=false;return false};if(!a&&-i>d-b-f){g.scrollTop(d);return c()}else{if(a&&i>f){g.scrollTop(0);return c()}}})};$.fn.scrollRelease=function(){return $(this).off("DOMMouseScroll mousewheel")};;(function($){$.fn.unveil=function(threshold,callback){var $w=$(window),th=threshold||0,retina=window.devicePixelRatio>1,attrib=retina?"data-src-retina":"data-src",images=this,loaded;this.one("unveil",function(){var source=this.getAttribute(attrib);source=source||this.getAttribute("data-src");if(source){this.setAttribute("src",source);if(typeof callback==="function")callback.call(this);}});function unveil(){var inview=images.filter(function(){var $e=$(this);if($e.is(":hidden"))return;var wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();return eb>=wt-th&&et<=wb+th;});loaded=inview.trigger("unveil");images=images.not(loaded);}
$w.on("scroll.unveil resize.unveil lookup.unveil",unveil);unveil();return this;};})(window.jQuery||window.Zepto);;(function(document,$){var proto=$.fn,details,isOpera=Object.prototype.toString.call(window.opera)=='[object Opera]',isDetailsSupported=(function(doc){var el=doc.createElement('details'),fake,root,diff;if(!('open'in el)){return false;}
root=doc.body||(function(){var de=doc.documentElement;fake=true;return de.insertBefore(doc.createElement('body'),de.firstElementChild||de.firstChild);}());el.innerHTML='<summary>a</summary>b';el.style.display='block';root.appendChild(el);diff=el.offsetHeight;el.open=true;diff=diff!=el.offsetHeight;root.removeChild(el);if(fake){root.parentNode.removeChild(root);}
return diff;}(document)),toggleOpen=function($details,$detailsSummary,$detailsNotSummary,toggle){var isOpen=$details.prop('open'),close=isOpen&&toggle||!isOpen&&!toggle;if(close){$details.removeClass('open').prop('open',false).triggerHandler('close.details');$detailsSummary.attr('aria-expanded',false);$detailsNotSummary.hide();}else{$details.addClass('open').prop('open',true).triggerHandler('open.details');$detailsSummary.attr('aria-expanded',true);$detailsNotSummary.show();}};proto.noSelect=function(){var none='none';return this.bind('selectstart dragstart mousedown',function(){return false;}).css({'MozUserSelect':none,'msUserSelect':none,'webkitUserSelect':none,'userSelect':none});};if(isDetailsSupported){details=proto.details=function(){return this.each(function(){var $details=$(this),$summary=$('summary',$details).first();$summary.attr({'role':'button','aria-expanded':$details.prop('open')}).on('click',function(){var close=$details.prop('open');$summary.attr('aria-expanded',!close);$details.triggerHandler((close?'close':'open')+'.details');});});};details.support=isDetailsSupported;}else{details=proto.details=function(){return this.each(function(){var $details=$(this),$detailsSummary=$('summary',$details).first(),$detailsNotSummary=$details.children(':not(summary)'),$detailsNotSummaryContents=$details.contents(':not(summary)');if(!$detailsSummary.length){$detailsSummary=$('<summary>').text('Details').prependTo($details);}
if($detailsNotSummary.length!=$detailsNotSummaryContents.length){$detailsNotSummaryContents.filter(function(){return this.nodeType==3&&/[^ \t\n\f\r]/.test(this.data);}).wrap('<span>');$detailsNotSummary=$details.children(':not(summary)');}
$details.prop('open',typeof $details.attr('open')=='string');toggleOpen($details,$detailsSummary,$detailsNotSummary);$detailsSummary.attr('role','button').noSelect().prop('tabIndex',0).on('click',function(){$detailsSummary.focus();toggleOpen($details,$detailsSummary,$detailsNotSummary,true);}).keyup(function(event){if(32==event.keyCode||(13==event.keyCode&&!isOpera)){event.preventDefault();$detailsSummary.click();}});});};details.support=isDetailsSupported;}}(document,jQuery));String.prototype.format=function(){"use strict"
var args=arguments,fs=this,i=0,j=-1;fs=fs.replace('{{','\x01\x02').replace('}}','\x03\x04');fs=fs.replace(/\{[^}]*\}/g,function(m){j++;var m=/\{(\w*)([^}]*)\}/.exec(m),key=m[1],attrs=m[2],obj,k,a;if(!key&&!attrs){if(j!=i)throw new Error("Cannot switch from automatic field numbering to manual field specification");return args[i++];}else if(!isNaN(key)){if(key>=args.length)throw new Error("Index out of range");obj=args[key];}else{if(!(key in args[0]))
throw new Error('Key Error: '+key);obj=args[0][key];}
if(!attrs)return obj;a=attrs.split(/([.\[])/);for(k=0;k<a.length;k+=2){key=a[k]
if(key==''&&k==0)continue;if(a[k-1]=='['){if(key.slice(-1)!=']')
throw new Error("Format Syntax Error, unmatched [");key=key.slice(0,-1);}
obj=obj[key]}
return obj;});fs=fs.replace('\x01\x02','{').replace('\x03\x04','}');return fs}
String.prototype.toTitleCase=function(){var skip=this.toTitleCase.skip;var string=this.replace(/(\S)(\S+)/g,function(m,m1,m2){if(m in skip)return m
else
return m1.toUpperCase()+m2});return string[0].toUpperCase()+string.slice(1);}
String.prototype.toTitleCase.skip={"the":0,"on":0,"of":0,"and":0,"in":0,"by":0}
String.prototype.join=function(a){return Array.prototype.join.call(a,this)}
var sc=window.sc||{}
sc.util={asciify:function(string,defaultChar){var mapping=sc.util.getAsciifyMap();if(defaultChar===undefined)
defaultChar='';return string.replace(/[\u007f-\uffff]/g,function(t){return mapping[t]||defaultChar})},unifyRegexPattern:function(string){var mapping=sc.util.getUnifyMap();return string.replace(/[ -~]/g,function(t){return'['+t+(mapping[t]||'')+']'});},getAsciifyMap:function(){if(!sc.util._asciifyMap)
sc.util._generateMaps()
return sc.util._asciifyMap;},getUnifyMap:function(){if(!sc.util._unifyMap)
sc.util._generateMaps()
return sc.util._unifyMap;},_generateMaps:function(){var data=[';;','<≮','=≠','>≯','``','aàáâãäåāăąǎǟǡǻȁȃȧḁạảấầẩẫậắằẳẵặ','bḃḅḇ','cçćĉċčḉ','dďḋḍḏḑḓ','eèéêëēĕėęěȅȇȩḕḗḙḛḝẹẻẽếềểễệ','fḟ','gĝğġģǧǵḡ','hĥȟḣḥḧḩḫẖ','iìíîïĩīĭįǐȉȋḭḯỉị','jĵǰ','kķǩḱḳḵ','lĺļľḷḹḻḽ','mḿṁṃ','nñńņňǹṅṇṉṋ','oòóôõöōŏőơǒǫǭȍȏȫȭȯȱṍṏṑṓọỏốồổỗộớờởỡợ','pṕṗ','rŕŗřȑȓṙṛṝṟ','sśŝşšșṡṣṥṧṩ','tţťțṫṭṯṱẗ','uùúûüũūŭůűųưǔǖǘǚǜȕȗṳṵṷṹṻụủứừửữự','vṽṿ','wŵẁẃẅẇẉẘ','xẋẍ','yýÿŷȳẏẙỳỵỷỹ','zźżžẑẓẕ','-–—','"“”','\'‘’'],ascmap={},unimap={}
data.forEach(function(s){var o=s[0],i,c,oupper=o.toUpperCase();for(i=s.length-1;i>=1;i--){c=s[i]
ascmap[c]=o
ascmap[c.toUpperCase()]=oupper;}
unimap[o]=s.slice(1)
unimap[oupper]=unimap[o].toUpperCase()});sc.util._asciifyMap=ascmap;sc.util._unifyMap=unimap;},acro_to_name:function(acro){acro=acro.replace('&nbsp;',' ').replace(' ',' ');var parts=acro.trim().toLowerCase().split(' '),out=[],n;for(var i=0;i<parts.length;i++){if(/[.\d]+/.test(parts[i])){out.push(parts[i])}else{n=this.expand_uid_data[parts[i]];if(n)
out.push(n[1])}}
return out.join(' ');},_expandUid:function(uid,i){var self=this,spaced=uid.replace(/(\D)(\d)/g,'$1 $2'),expansion;return spaced.replace(/[^\d\s]+/g,function(m){expansion=self.expand_uid_data[m];return expansion?expansion[i]:m;})
return acro;},uidToAcro:function(uid){return this._expandUid(uid,0);},uidToName:function(uid){return this._expandUid(uid,1);}}
$.fn.eachText=function(callback){function iterNodes(node){if(node.nodeType==3){var result=callback(node.nodeValue,node);if(result!==undefined){node.nodeValue=result;}}else{Array.prototype.forEach.call(node.childNodes,iterNodes);}}
this.each(function(){iterNodes(this)});return this}
$.fn.textNodes=function(filter){var result=[];function iterNodes(node){if(filter&&$.proxy(filter,node)(node)==false)return
if(node.nodeType==3){result.push(node);}else{Array.prototype.forEach.call(node.childNodes,iterNodes);}}
this.each(function(){iterNodes(this)});return $(result)}
sc.text_selection=(function(){"use strict";if($('#text').length==0)return
var elementSelector='article > *:not(div),\
                           article > div.hgroup,\
                           article > div:not(.hgroup) > *',$elements=$(elementSelector),valid_char_rex=/[^ \n “”‘’.,?!—]/g,ignoreClasses,$linkElement=$('[name=text-selection-url]')
function nodeFilter(){if($(this).is(ignoreClasses)){return false}
if(this.nodeType==3&&/^\s*[“”‘’]+\s*$/.test(this.nodeValue)){return false}
return true}
function onReady(){var a=[];for(var k in(sc.classes.margin)){a.push('.'+k);}
ignoreClasses=','.join(a);highlightSelection();$(document.body).on('mouseup',updateLink);var clip=new ZeroClipboard($linkElement.parent().find('button')[0],{moviePath:"/js/vendor/ZeroClipboard-1.2.3.swf",hoverClass:"hover",activeClass:"active"});clip.on('load',function(client){client.on('complete',function(client,args){});});clip.on('dataRequested',function(client,args){var text=$linkElement.val();client.setText(text);console.log('Set text');});$linkElement.on('click',function(){$linkElement.select();});$linkElement.parent().find('button, input').attr('disabled','disabled');}
function highlightSelection(){var parts=window.location.pathname.split('/');if(parts.length<4)return
var targets=parts[3],firstTarget=null;targets.split('+').forEach(function(target){var m=/(\d+)(?:(?:\.(\d+))?-(\d+)(?:\.(\d+))?)?/.exec(target),startId=+m[1],endId=+m[3],startOffset=+m[2],endOffset=+m[4],startedHl=false,wasStartedHl=false,doneHl=false;if(isNaN(endId)){endId=startId}
if(isNaN(startOffset)||startOffset==0){startOffset=1}
if(isNaN(endOffset)){endOffset=9001}
console.log(startId,endId,startOffset,endOffset);for(var index=startId;index<=endId;++index){var targetElement=$elements[index];firstTarget=firstTarget||targetElement;if(index!=startId&&index!=endId)
{$(targetElement).textNodes(nodeFilter).wrap('<span class="marked">');continue}
var pos=0;$(targetElement).textNodes(nodeFilter).each(function(i,node){var text=node.nodeValue;if(index==endId&&pos>=endOffset){return}
wasStartedHl=startedHl;var startedAdded=false;var newText=text.replace(valid_char_rex,function(m){var result=m[0];pos+=1;if(index==endId&&pos==endOffset){result=result+'__HLEND__';doneHl=true;}
if(index==startId&&pos==startOffset){result='__HLSTART__'+result;startedAdded=true;startedHl=true;}
return result});if(startedHl){if(!startedAdded){newText='__HLSTART__'+newText;}
if(!doneHl){newText=newText+'__HLEND__';}}
node.nodeValue=newText});var html=targetElement.innerHTML;html=html.replace(/__HLSTART__/g,'<span class="marked">').replace(/__HLEND__/g,'</span>');targetElement.innerHTML=html;var marked=$(targetElement).find('.marked');marked.first().addClass('first-marked');marked.last().addClass('last-marked');}
for(var index=startId;index<=endId;++index){var marked=$($elements[index]).find('.marked');marked.first().addClass('first-marked');marked.last().addClass('last-marked');}});if(firstTarget){document.body.scrollTop=$(firstTarget).offset().top-40;}}
function createReferenceChrome(){var selection=window.getSelection(),range=selection.getRangeAt(),startNode=range.startContainer,endNode=range.endContainer,startParent=$(startNode).parents(elementSelector),endParent=$(endNode).parents(elementSelector),startOffset=range.startOffset,endOffset=range.endOffset;var range=selection.getRangeAt();if($(range.commonAncestorContainer).parents('#text').length==0){return{error:'A reference could not be created as '+'the selection is not a part of the text'}}
var result=[],start_id=$elements.index(startParent),end_id=$elements.index(endParent);for(var index=start_id;index<=end_id;++index){if(index>start_id&&index<end_id){result.push({index:index})
continue}
var parent=$elements[index],char_start=null,char_end=null,valid_char_count=0;if(index>start_id){char_start=0;}
if(index<end_id){char_end=$(parent).text().match(valid_char_rex).length;}
$(parent).textNodes(nodeFilter).each(function(i,node){var text=node.nodeValue;if(node==startNode||node==endNode){if(char_end!==null&&char_start!==null)return
var all_char_count=0;Array.prototype.forEach.call(text,function(char){if(char_end!==null&&char_start!==null)return
if(char.search(valid_char_rex)==0){valid_char_count+=1;if(node==startNode){if(all_char_count==startOffset){char_start=valid_char_count;}}
if(node==endNode){if(all_char_count>=endOffset){char_end=valid_char_count-1;}}}
all_char_count+=1;});}else{var m=text.match(valid_char_rex);if(m){valid_char_count+=m.length;}}});result.push({index:index,char_start:char_start,char_end:char_end})}
return result;}
function createReference(chars){var selection=window.getSelection(),startNode=selection.anchorNode,endNode=selection.focusNode,startParent=$(startNode).parents(elementSelector),endParent=$(endNode).parents(elementSelector),startOffset=selection.anchorOffset,endOffset=selection.focusOffset;var range=selection.getRangeAt();if($(range.commonAncestorContainer).parents('#text').length==0){return{error:'A reference could not be created as '+'the selection is not a part of the text'}}
if(startParent.length==0||endParent.length==0){return{'error':'A reference could not be created as '+'the selection is not a part of the text'}}
var result=[],start_id=$elements.index(startParent),end_id=$elements.index(endParent);if(start_id>=end_id){var diff=null;if(start_id>end_id){var tmp=end_id;end_id=start_id;start_id=tmp;tmp=startParent;startParent=endParent;endParent=tmp;diff=-1;}else{var nodes=$($elements.toArray().slice(start_id,end_id+1)).textNodes();diff=nodes.index(endNode)-nodes.index(startNode);}
if(diff>0){}else if((diff<0)||(startOffset>endOffset)){tmp=startNode;startNode=endNode
endNode=tmp;tmp=startOffset;startOffset=endOffset;endOffset=tmp;}}
for(var index=start_id;index<=end_id;++index){if(index>start_id&&index<end_id){result.append({index:index})
continue}
var parent=$elements[index],char_start=null,char_end=null,valid_char_count=0;if(index>start_id){char_start=0;}
if(index<end_id){char_end=$(parent).text().match(valid_char_rex).length;}
$(parent).textNodes().each(function(i,node){var text=node.nodeValue;if(node==startNode||node==endNode){if(char_end!==null&&char_start!==null)return
var all_char_count=0;Array.prototype.forEach.call(text,function(char){if(char_end!==null&&char_start!==null)return
if(char.search(valid_char_rex)==0){valid_char_count+=1;console.log(char,valid_char_count,all_char_count);if(node==startNode){if(all_char_count==startOffset){char_start=valid_char_count;console.log('Start: ',char,char_start);}}
if(node==endNode){if(all_char_count>=endOffset){char_end=valid_char_count-1;console.log('End: ',char,char_end);}}}
all_char_count+=1;});}else{valid_char_count+=text.match(valid_char_rex).length;}});result.push({index:index,char_start:char_start,char_end:char_end})}
return result;}
function updateLink(){if(window.getSelection().type!='Range')return
var target=null;var result=createReferenceChrome();if('error'in result){return}
var start=result.slice(0,1)[0],end=result.slice(-1)[0];if(end.char_end==1){end.index-=1;end.char_end=null;}
if(start.char_start==1&&end.char_end==null){if(start.index==end.index){target=start.index;}}
if(target==null){var targetStart=start.index;if(start.char_start>1||end.char_end!=null){targetStart+='.'+start.char_start;}
var targetEnd=end.index;if(end.char_end!=null){targetEnd+='.'+end.char_end;}
console.log(targetStart,targetEnd)
target='{}-{}'.format(targetStart,targetEnd);}
var lang_uid=$('#text').attr('lang'),uid=$('.sutta').attr('id');$linkElement.val('{}/{}/{}/{}'.format(window.location.origin,lang_uid,uid,target));$linkElement.parent().find('button, input').removeAttr('disabled');}
$(document).one('ready',onReady);return{highlightSelection:highlightSelection,createReference:createReferenceChrome,nodeFilter:nodeFilter}})();sc.nav={search_element:$('#page-header-search > input'),search_results:$('#page-header-search-results'),lastXHR:null,init:function(){sc.nav.search_element.keyup(sc.nav.handleSearch);$('body').mousedown(sc.nav.hideResultsIfNotSearch);},handleSearch:function(e){var input=e.target.value;if(sc.nav.lastXHR){sc.nav.lastXHR.abort();}
if(input.length<3){sc.nav.hideResults();return;}
url="/search?query="+encodeURIComponent(input)+"&ajax=1";ajax=jQuery.ajax(url,{"cache":"true"});ajax.done(sc.nav.done);sc.nav.lastXHR=ajax;},done:function(data,code,jqXHR){if('ga'in window){ga('send','pageview',this.url);}
results=$("<div>"+data+"</div>");sc.nav.search_results.html(results);sc.truncate.apply(sc.nav.search_results,125);sc.nav.search_results.find("tr").filter(":even").addClass("even");$("span.precision").attr({'title':'Estimated precision of location, 1 = very certain.'});sc.nav.showResults();},hideResultsIfNotSearch:function(e){var target=$(e.target);if(!target.closest('#page-header-search')[0]&&!target.closest('#page-header-search-results')[0]){sc.nav.hideResults();}},hideResults:function(){sc.nav.search_results.stop(true,true).slideUp();},showResults:function(){sc.nav.search_results.stop(true,true).slideDown();}};sc.nav.init();sc.truncate={init:function(max_length){this.apply(document.body,max_length);},apply:function(target,max_length){if(!max_length)max_length=200;$(target).find('.truncate').each(function(){if($(this).find('div.showmore, div.showless').length>0){return}
var brief=sc.truncate.brief(this,max_length);if(brief===false)return;var parent=$(this).parent()
var showmore=$('<div class="showmore"/>').appendTo(parent);showmore.append(this);var showless=$('<div class="showless"/>').html(brief).appendTo(parent);showmore.find('p:last').append('<a class="showless"></a>');showless.append('<a class="showmore"></a>');showmore.hide();});$('div.showless').show();$('div.showmore').hide();$('a.showless').text('[less]');$('a.showmore').text('[…more]');},brief:function(element,max_length){var text=$(element).text();if(text.length<max_length){return false}
var brief=text
brief=brief.replace(/(^| )(?=[a-zA-Z.]*\d)([^, ]+)/g,'');brief=brief.replace(/\s{2,}/g,' ')
brief=brief.slice(0,max_length+1);var m=brief.match(/.*\./);if(m&&m[0].length>max_length*3/4){brief=m[0];}else{brief=brief.replace(/[^ —,.]*$/,'')}
return brief},}
sc.truncate.init();$(document.body).on('click','a.showmore',function(){parent=$(this).parent().parent();parent.children('div.showless').slideUp();parent.children('div.showmore').slideDown();parent.find('a.showless').each(function(){parent.find('div.showmore p:last').append(this);});return false});$(document.body).on('click','a.showless',function(){parent=$(this).parents('div.showmore').parent();showless=parent.children('div.showless').show();parent.children('div.showmore').hide();scrollto=parent.find(':first')[0]
scrollto.scrollIntoView();return false});"use strict";function E(nodeName,text){var e=document.createElement(nodeName);if(text)e.appendChild(T(text));return e;}
function T(arg){return document.createTextNode(arg)}
var scMessage={messageBox:$('<div id="message_box"></div>').insertAfter("header").hide(),show:function(html,delay){this.messageBox.clearQueue();this.messageBox.html(html).show().delay(delay).fadeOut();},clear:function(){this.messageBox.clearQueue();this.messageBox.fadeOut();}}
$.ajaxSetup({cache:true});var scState={_target:(function(){if($("#text").length)return $("#text")[0];if($("#onecol").length)return $("#onecol")[0];if($("#home").length)return $("#home")[0];if($("body section").length)return $("body section")[0];throw"Error!";})(),save:function(state){if(typeof this[state]=="function")throw new Error("Invalid state name!");this[state]=this._target.innerHTML;},set:function(state,html){if(typeof this[state]=="function")throw new Error("Invalid state name!");if(!html)throw new TypeError;this._target.innerHTML=html;this.save("state")},restore:function(state){if(typeof this[state]=="function")throw new Error("Invalid state name!");if(!this[state])throw new Error("State not saved!");this._target.innerHTML=this[state];},getHTML:function(state){if(typeof this.state=="function")throw new Error("Invalid state name!");if(!this[state])throw new Error("State not saved!");return this[state];},exists:function(state){if(typeof this.state=="function")throw new Error("Invalid state name!");return!!this[state];}}
var scPersistantStorage={database:function(){if(!('localStorage'in window))return null;var lsdb={add:function(key,data,version){if(!version)version="";localStorage[key]=data;localStorage[key+'.version']=version;},get:function(key,version)
{if(!version)version="";if(localStorage[key+'.version']==version)
return localStorage[key];else
this.clear(key);},check:function(key,version)
{if(!version)version="";return(key in localStorage&&localStorage[key+'.version']==version)},remove:function(key)
{localStorage.removeItem(key);localStorage.removeItem(key+'.version');},purge:function()
{localStorage.clear();}}
return lsdb;}(),store:function(key,data,version){if(!this.database)return false;this.database.add(key,JSON.stringify(data),version);},retrive:function(key,version){if(!this.database)return false;return JSON.parse(this.database.get(key,version));},check:function(key,version){if(!this.database)return false;return this.database.check(key,version);}}
function togglePaliLookup(){toggleLookupOn=!sc.userPrefs.getPref("paliLookup");sc.sidebar.messageBox.clear();sc.userPrefs.setPref("paliLookup",toggleLookupOn,true);}
function transliterateHandler()
{sc.userPrefs.setPref("script",this.id,true);}
function toggleTextualInfo(force){var showTextInfo=sc.userPrefs.getPref("textInfo");showTextInfo=!showTextInfo;if(force===true){showTextInfo=true;}
else if(force===false){showTextInfo=false;}
if(showTextInfo)
{$(document.body).addClass("infomode");}else{$(document.body).removeClass("infomode");}
sc.userPrefs.setPref("textInfo",showTextInfo,false);}
function buildTextualInformation(){var marginClasses=sc.classes.margin,idRex,idRepl;for(var marginClass in sc.classes.margin){var elements=$('.'+marginClass);if(elements.length==0){continue}
var title=sc.classes.margin[marginClass];if(title){elements.attr("title",title);}
if(marginClass=='ms'){idRex=/p_([0-9A-Z]+)_([0-9]+)/;idRepl="$1:$2";}else if(marginClass=='vnS'){idRex=/S.([iv]+),([0-9])/;idRepl="S $1 $2";}
else if(marginClass=='pts1'||marginClass=='pts2'){idRex=RegExp('^pts','i');idRepl='';}else{idRex=RegExp('^'+marginClass,'i');idRepl='';}
elements.each(function(){var id=$(this).attr('id');if(!id){return}
if($(this).text()==''){$(this).text(id.replace(/^\d+_/,'').replace(idRex,idRepl).replace(/(\d)-(\d)/,'$1\u2060–\u2060$2'));}});}
var tes=$('.t, .t-linehead');if(tes.length){var uid=$('section.sutta').attr('id'),volPrefix=null;var prefixes=Object.keys(sc.volPrefixMap).sort(function(a,b){return a.length<b.length});for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var m=RegExp('^'+prefix+'(?![a-z])\\.?(\\d*)').exec(uid);if(m){var number=m[1],volData=sc.volPrefixMap[prefix];if(typeof(volData)=='string'){volPrefix=volData;}else{for(j=0;j<volData.length;j++){var from=volData[i][0],to=volData[i][1],value=volData[i][2]
if(from<=number&&number<=to){volPrefix=value;break}}}
if(volPrefix){break}}}
if(volPrefix!==null){tes.each(function(){$(this).text(volPrefix+' '+$(this).text());});}}
$('#text a[id]:not([href])').each(function(){$(this).attr('href','#'+$(this).attr('id'));});for(var contentClass in sc.classes.content){$('.'+contentClass).attr('title',sc.classes.content[contentClass]);}}
var wordMap={};var reverseMap={};function toSyllablesInit(){$(".sutta P, .sutta H1, .sutta H2, .sutta H3").addClass('syllables');return;}
function transliterate(func){if(!wordMap[func.name])wordMap[func.name]={};if(func==toMyanmar){$('#text').attr('lang','my');}
if(!wordMap[func.name])wordMap[func.name]={};if(func==toThai){$('#text').attr('lang','th');}
if(!wordMap[func.name])wordMap[func.name]={};if(func==toSinhala){$('#text').attr('lang','si');}
if(!wordMap[func.name])wordMap[func.name]={};if(func==toDevar){$('#text').attr('lang','hi');}
else{$('#text').attr('lang','pi');}
if(func==toSyllables){toSyllablesInit();$('.syllables').each(function(){toSyllablesIteratively(this)});return;}
var classes=$(".sutta P, .sutta H1, .sutta H2, .sutta H3")
for(var i=0;i<classes.length;i++){convertIteratively(classes[i],func);}
if(func==toMyanmar){var evam=$('#text .evam')[0];if(evam){var textNode=evam.nextSibling;if(textNode){var text=textNode.textContent;text=text.replace(/^\s+/,'');textNode.textContent=text;}}}}
function convertIteratively(startNode,func){var node,it=new Iter(startNode,'text'),type,name,text;while(node=it.next())
{if(node.parentNode.nodeName=='A')
if(node.parentNode.parentNode.nodeName[0]!='H')
continue;text=node.nodeValue.replace(/\&nbsp;/g,' ');;if(!(/^\s*$/).test(text)){if(func!=toRoman&&func!=toSyllables){node.nodeValue=transliterateString(text,func);}}}
return}
function toRoman(input){return input}
var anychar=/[aiueokgcjtdnpbmyrlvshāīūṭḍṅṇṃṃñḷ]/i;var syllabousRex=(function(){var cons="(?:br|[kgcjtṭdḍbp]h|[kgcjtṭdḍp](?!h)|[mnyrlvshṅṇṃṃñḷ]|b(?![rh]))";var vowel="(?:[aiueoāīū])";var other="[^aiueokgcjtdnpbmyrlvshāīūṭḍṅṇṃṃñḷ]";return RegExp(cons+'*'+vowel+'(?:'+cons+'(?!'+vowel+'))?'+'|'+other,'gi')
var other="[^aiueokgcjtdnpbmyrlvshāīūṭḍṅṇṃṃñḷ]";var cons="[kgcjtdnpbmyrlvshṭḍṅṇṃṃñḷ]"
return RegExp('('+cons+'*[aiueoāīū]('+cons+'(?='+other+')|[yrlvshṅṃñ](?=h)|'+cons+'(?!h)'+'(?='+cons+'))?'+')|('+other+'+)','gi');})();function toSyllables(input){var out="";var parts=input.match(syllabousRex);if(parts)
for(var i=0;i<parts.length;i++)
{if(anychar.test(parts[i]))
{if((/[aiu]$/i).test(parts[i])){out+=parts[i]}
else{out+="<u>"+parts[i]+"</u>"};if(parts[i+1]&&(/[aiueoāīū]/i).test(parts[i+1]))
out+=syllSpacer;}else
out+=parts[i];}
return out}
function toSyllablesIteratively(node){var it=new Iter(node,'text'),input,i,parts,out,proxy;while(node=it.next())
{parent=node.parentNode;if(parent.nodeName=='A')continue;input=node.nodeValue.replace(/­/g,'');out=toSyllables(input)
proxy=E('span')
parent.insertBefore(proxy,node);node.nodeValue='';proxy.outerHTML=out;}}
function transliterateWord(word,func){var script=func.name
if(func.name=='toSyllables')
return func(word);word=word.toLowerCase().replace(/ṁ/g,'ṃ');if(!wordMap[script][word]){wordMap[script][word]=func(word)
reverseMap[wordMap[script][word]]=word}
return wordMap[script][word];}
function transliterateString(input,func){var splitRex=RegExp('[^aiueokgcjtdnpbmyrlvshāīūṭḍṅṇṃñḷ]+|[aiueokgcjtdnpbmyrlvshāīūṭḍṅṇṃñḷ]+','gi');var output="";input=input.replace(/\&quot;/g,'`').toLowerCase();var parts=input.match(splitRex);for(var i in parts){var word=parts[i];if(anychar.test(word))
{output+=transliterateWord(word,func)}
else{output+=parts[i];}}
output=output.replace(/\`+/g,'"');return output;}
function toSinhala(l){l=l.toLowerCase()+" ";var m={a:"අ","ā":"ආ",i:"ඉ","ī":"ඊ",u:"උ","ū":"ඌ",e:"එ",o:"ඔ"};var b={"ā":"ා",i:"ි","ī":"ී",u:"ු","ū":"ූ",e:"ෙ",o:"ො","ṃ":"ං",k:"ක",g:"ග","ṅ":"ඞ",c:"ච",j:"ජ","ñ":"ඤ","ṭ":"ට","ḍ":"ඩ","ṇ":"ණ",t:"ත",d:"ද",n:"න",p:"ප",b:"බ",m:"ම",y:"ය",r:"ර",l:"ල","ḷ":"ළ",v:"ව",s:"ස",h:"හ"};var j={kh:"ඛ",gh:"ඝ",ch:"ඡ",jh:"ඣ","ṭh":"ඨ","ḍh":"ඪ",th:"ථ",dh:"ධ",ph:"ඵ",bh:"භ","jñ":"ඥ","ṇḍ":"ඬ",nd:"ඳ",mb:"ඹ",rg:"ඟ"};var a={k:"ක",g:"ග","ṅ":"ඞ",c:"ච",j:"ජ","ñ":"ඤ","ṭ":"ට","ḍ":"ඩ","ṇ":"ණ",t:"ත",d:"ද",n:"න",p:"ප",b:"බ",m:"ම",y:"ය",r:"ර",l:"ල","ḷ":"ළ",v:"ව",s:"ස",h:"හ"};var k,g,f,e,d;var c="";var h=0;while(h<l.length){k=l.charAt(h-2);g=l.charAt(h-1);f=l.charAt(h);e=l.charAt(h+1);d=l.charAt(h+2);if(m[f]){if(h==0||g=="a"){c+=m[f]}else{if(f!="a"){c+=b[f]}}h++}else{if(j[f+e]){c+=j[f+e];h+=2;if(a[d]){c+="්"}}else{if(b[f]&&f!="a"){c+=b[f];h++;if(a[e]&&f!="ṃ"){c+="්"}}else{if(!b[f]){if(a[g]||(g=="h"&&a[k])){c+="්"}c+=f;h++;if(m[e]){c+=m[e];h++}}else{h++}}}}}if(a[f]){c+="්"}c=c.replace(/ඤ්ජ/g,"ඦ");c=c.replace(/ණ්ඩ/g,"ඬ");c=c.replace(/න්ද/g,"ඳ");c=c.replace(/ම්බ/g,"ඹ");c=c.replace(/්ර/g,"්ර");c=c.replace(/\`+/g,'"');return c.slice(0,-1)}
function toMyanmar(k){k=k.toLowerCase()+" ";var m={a:"အ",i:"ဣ",u:"ဥ","ā":"အာ","ī":"ဤ","ū":"ဦ",e:"ဧ",o:"ဩ"};var l={i:"ိ","ī":"ီ",u:"ု","ū":"ူ",e:"ေ","ṃ":"ံ",k:"က",kh:"ခ",g:"ဂ",gh:"ဃ","ṅ":"င",c:"စ",ch:"ဆ",j:"ဇ",jh:"ဈ","ñ":"ဉ","ṭ":"ဋ","ṭh":"ဌ","ḍ":"ဍ","ḍh":"ဎ","ṇ":"ဏ",t:"တ",th:"ထ",d:"ဒ",dh:"ဓ",n:"န",p:"ပ",ph:"ဖ",b:"ဗ",bh:"ဘ",m:"မ",y:"ယ",r:"ရ",l:"လ","ḷ":"ဠ",v:"ဝ",s:"သ",h:"ဟ"};var a={k:"က",g:"ဂ","ṅ":"င",c:"စ",j:"ဇ","ñ":"ဉ","ṭ":"ဋ","ḍ":"ဍ","ṇ":"ဏ",t:"တ",d:"ဒ",n:"န",p:"ပ",b:"ဗ",m:"မ",y:"ယ",r:"ရ",l:"လ","ḷ":"ဠ",v:"ဝ",s:"သ",h:"ဟ"};var n={kh:"1",g:"1",d:"1",dh:"1",p:"1",v:"1"};var j,f,e,d,c;var b="";var g=0;k=k.replace(/\&quot;/g,"`");var h=false;while(g<k.length){j=k.charAt(g-2);f=k.charAt(g-1);e=k.charAt(g);d=k.charAt(g+1);c=k.charAt(g+2);if(m[e]){if(g==0||f=="a"){b+=m[e]}else{if(e=="ā"){if(n[h]){b+="ါ"}else{b+="ာ"}}else{if(e=="o"){if(n[h]){b+="ေါ"}else{b+="ော"}}else{if(e!="a"){b+=l[e]}}}}g++;h=false}else{if(l[e+d]&&d=="h"){b+=l[e+d];if(c!="y"&&!h){h=e+d}if(a[c]){b+="္"}g+=2}else{if(l[e]&&e!="a"){b+=l[e];g++;if(d!="y"&&!h){h=e}if(a[d]&&e!="ṃ"){b+="္"}}else{if(!l[e]){b+=e;g++;if(m[d]){if(m[d+c]){b+=m[d+c];g+=2}else{b+=m[d];g++}}h=false}else{h=false;g++}}}}}b=b.replace(/ဉ္ဉ/g,"ည");b=b.replace(/္ယ/g,"ျ");b=b.replace(/္ရ/g,"ြ");b=b.replace(/္ဝ/g,"ွ");b=b.replace(/္ဟ/g,"ှ");b=b.replace(/သ္သ/g,"ဿ");b=b.replace(/င္/g,"င်္");return b.slice(0,-1)}
function toDevar(l){l=l.toLowerCase()+" ";var m={a:" अ",i:" इ",u:" उ","ā":" आ","ī":" ई","ū":" ऊ",e:" ए",o:" ओ"};var n={"ā":"ा",i:"ि","ī":"ी",u:"ु","ū":"ू",e:"े",o:"ो","ṃ":"ं",k:"क",kh:"ख",g:"ग",gh:"घ","ṅ":"ङ",c:"च",ch:"छ",j:"ज",jh:"झ","ñ":"ञ","ṭ":"ट","ṭh":"ठ","ḍ":"ड","ḍh":"ढ","ṇ":"ण",t:"त",th:"थ",d:"द",dh:"ध",n:"न",p:"प",ph:"फ",b:"ब",bh:"भ",m:"म",y:"य",r:"र",l:"ल","ḷ":"ळ",v:"व",s:"स",h:"ह"};var k,h,g,f,e,d,b;var c="";var a=0;var j=0;l=l.replace(/\&quot;/g,"`");while(j<l.length){k=l.charAt(j-2);h=l.charAt(j-1);g=l.charAt(j);f=l.charAt(j+1);e=l.charAt(j+2);d=l.charAt(j+3);b=l.charAt(j+4);if(j==0&&m[g]){c+=m[g];j+=1}else{if(f=="h"&&n[g+f]){c+=n[g+f];if(e&&!m[e]&&f!="ṃ"){c+="्"}j+=2}else{if(n[g]){c+=n[g];if(f&&!m[f]&&!m[g]&&g!="ṃ"){c+="्"}j++}else{if(g!="a"){if(a[h]||(h=="h"&&a[k])){c+="्"}c+=g;j++;if(m[f]){c+=m[f];j++}}else{j++}}}}}if(a[g]){c+="्"}c=c.replace(/\`+/g,'"');return c.slice(0,-1)}
function toThai(m){m=m.toLowerCase()+" ";var n={a:"1","ā":"1",i:"1","ī":"1","iṃ":"1",u:"1","ū":"1",e:"2",o:"2"};var j={a:"อ","ā":"า",i:"ิ","ī":"ี","iṃ":"ึ",u:"ุ","ū":"ู",e:"เ",o:"โ","ṃ":"ํ",k:"ก",kh:"ข",g:"ค",gh:"ฆ","ṅ":"ง",c:"จ",ch:"ฉ",j:"ช",jh:"ฌ","ñ":"","ṭ":"ฏ","ṭh":"","ḍ":"ฑ","ḍh":"ฒ","ṇ":"ณ",t:"ต",th:"ถ",d:"ท",dh:"ธ",n:"น",p:"ป",ph:"ผ",b:"พ",bh:"ภ",m:"ม",y:"ย",r:"ร",l:"ล","ḷ":"ฬ",v:"ว",s:"ส",h:"ห"};var a={k:"1",g:"1","ṅ":"1",c:"1",j:"1","ñ":"1","ṭ":"1","ḍ":"1","ṇ":"1",t:"1",d:"1",n:"1",p:"1",b:"1",m:"1",y:"1",r:"1",l:"1","ḷ":"1",v:"1",s:"1",h:"1"};var l,h,g,f,e,d,b;var c="";var k=0;m=m.replace(/\&quot;/g,"`");while(k<m.length){l=m.charAt(k-2);h=m.charAt(k-1);g=m.charAt(k);f=m.charAt(k+1);e=m.charAt(k+2);d=m.charAt(k+3);b=m.charAt(k+4);if(n[g]){if(g=="o"||g=="e"){c+=j[g]+j.a;k++}else{if(k==0){c+=j.a}if(g=="i"&&f=="ṃ"){c+=j[g+f];k++}else{if(g!="a"){c+=j[g]}}k++}}else{if(j[g+f]&&f=="h"){if(e=="o"||e=="e"){c+=j[e];k++}c+=j[g+f];if(a[e]){c+="ฺ"}k=k+2}else{if(j[g]&&g!="a"){if(f=="o"||f=="e"){c+=j[f];k++}c+=j[g];if(a[f]&&g!="ṃ"){c+="ฺ"}k++}else{if(!j[g]){c+=g;if(a[h]||(h=="h"&&a[l])){c+="ฺ"}k++;if(f=="o"||f=="e"){c+=j[f];k++}if(n[f]){c+=j.a}}else{k++}}}}}if(a[g]){c+="ฺ"}c=c.replace(/\`+/g,'"');return c.slice(0,-1);};function generateLookupMarkup(){var classes=".sutta P, .sutta H1, .sutta H2, .sutta H3"
generateMarkupCallback.nodes=$(classes).toArray();generateMarkupCallback.start=Date.now();sc.sidebar.disableControls()
generateMarkupCallback();return;}
function generateMarkupCallback(){var node=generateMarkupCallback.nodes.shift();if(!node){sc.sidebar.enableControls();return}
toLookupMarkup(node);setTimeout(generateMarkupCallback,5);}
var paliRex=/([aiueokgcjtdnpbmyrlvshāīūṭḍṅṇṃñḷ’­”]+)/i;var splitRex=/([^  \n,.– —:;?!"'“‘-]+)/;function toLookupMarkup(startNode)
{var parts,i,out="",proxy,node;var it=new Iter(startNode,'text');while(node=it.next())if(node.nodeValue){if(node.parentNode.nodeName=='A')
if(node.parentNode.parentNode.nodeName[0]!='H')
continue;out="";parts=node.nodeValue.split(splitRex);for(i=0;i<parts.length;i++){if(i%2==1){var word=parts[i]
if(sc.mode.translitFunc.name!='toRoman')
word=transliterateWord(word,sc.mode.translitFunc);if(node.parentNode.nodeName!='A')
out+='<span class="lookup">'+word+'</span>'
else
out+=word}else{out+=parts[i];}}
proxy=E('span');node.parentNode.replaceChild(proxy,node);proxy.outerHTML=out;}}
var G_uniRegExpNSG=/[–   :;?!,.“‘]+/gi;var toggleLookupOn=false;var paliDictRequested=false;function enablePaliLookup(){$(document).on('mouseenter','span.lookup',lookupWordHandler);if(!sc.data.piEndings){jQuery.ajax({url:sc.jsBaseUrl+'data/pi-endings.js',dataType:"script",success:undefined,crossDomain:true,cache:true});}
var script=$('#lookup-to-lang').val(),scriptUrl,dictObjectName;if(script=='en'){scriptUrl='data/pi2en-maindata.js';dictObjectName='pi2enDict';}else if(script=='es'){scriptUrl='data/pi2es-maindata.js';dictObjectName='pi2esDict';}else if(script=='pt'){scriptUrl='data/pi2pt-maindata.js';dictObjectName='pi2ptDict';}else if(script=='id'){scriptUrl='data/pi2id-maindata.js';dictObjectName='pi2idDict';}else{throw Error('Unknown script: '+script);}
function ready(){sc.data.piLookup=sc.data[dictObjectName];generateLookupMarkup();sc.sidebar.messageBox.show("The dictionary is enabled. Hover with the mouse to display the meaning.",{id:"msg-lookup-success"});}
if(!sc.data[dictObjectName])
{sc.sidebar.messageBox.clear();sc.sidebar.messageBox.show("Requesting Pali Dictionary…",{id:"msg-request-dict",timeout:null});jQuery.ajax({url:sc.jsBaseUrl+scriptUrl,dataType:"script",success:function(){ready();sc.sidebar.messageBox.remove("msg-request-dict");},crossDomain:true,cache:true});}else{ready();}}
function lookupWordHandler(event){if(!sc.userPrefs.getPref("paliLookup"))return;if(!'paliDictionary'in window)return;if($(this).children().is("span.meaning"))return;var word=$(this).text().toLowerCase().trim();word=word.replace(/­/g,'').replace(RegExp(syllSpacer,'g'),'');if(reverseMap[word]){meaning+=word+" : ";word=reverseMap[word];}
word=word.replace(/ṃg/g,'ṅg').replace(/ṃk/g,'ṅk').replace(/ṃ/g,'ṃ').replace(/Ṃ/g,'ṃ');var meaning=lookupWord(word);if(meaning){var textBox=$('<span class="meaning">'+meaning+'</span>');$(this).append(textBox);sc.formatter.rePosition(textBox);}}
function lookupWord(word){var allMatches=[];var isTi=false;if(word.match(/[’”]ti$/)){isTi=true;word=word.replace(/[’”]ti$/,"");}
word=word.replace(/[’”]/g,"");var original=word;var unword=null;var m=matchComplete(word,{"ti":isTi});if(!m||m.length==0){if(word.search(/^an|^a(.)\1/)!=-1)unword=word.substring(2,word.length)
else if(word.search(/^a/)!=-1)unword=word.substring(1,word.length);if(unword){m=matchComplete(unword,{"ti":isTi});if(m&&m.length>0)
{allMatches.push({"base":"an","meaning":"non/not"});}}}
if(m&&m.length>0)
{allMatches=allMatches.concat(m);}
if(allMatches.length==0)
{var m=matchPartial(word);if(unword)
{var unm=matchPartial(unword);if((unm&&!m)||(unm&&m&&unm.base.length>m.base.length)){m=unm;allMatches.push({"base":"an","meaning":"non/not"});}}
var foundComplete=false;while(m&&!foundComplete)
{allMatches=allMatches.concat(m);var leftover=m.leftover;var sandhi=m.base[m.base.length-1];var firstchar=leftover[0];leftover=leftover.substring(1,leftover.length);var starts=[firstchar,"",sandhi+firstchar];var vowels=['a','ā','i','ī','u','ū','o','e'];if(sandhi=='a'||sandhi=='i'||sandhi=='u')vowels=['a','i','u'];for(i in vowels)starts.push(vowels[i]+firstchar);var foundComplete=false;for(i in starts)
{m=matchComplete(starts[i]+leftover,{"ti":isTi});if(m&&m.length>0){allMatches=allMatches.concat(m);foundComplete=true;break;}
m=matchPartial(starts[i]+leftover);if(m)break;}
if(!m)
{allMatches.push({"base":firstchar+leftover,"meaning":"?"});break;}}}
var out="";if(allMatches.length==0)
{allMatches.push({"base":original,"meaning":"?"});}
if(isTi)allMatches.push({"base":"iti","meaning":"endquote"});for(var i in allMatches){var href="http://dsal.uchicago.edu/cgi-bin/philologic/search3advanced?dbname=pali&searchdomain=headwords&matchtype=start&display=utf8&query="+allMatches[i].base;out+='<a href="'+href+'">'+allMatches[i].base+'</a>: '+allMatches[i].meaning;if(i!=allMatches.length-1)
{out+=" + ";}}
return out;}
function matchComplete(word,args){var matches=[];for(var pi=0;pi<2;pi++)
for(var vy=0;vy<2;vy++)
for(var ti=0;ti<2;ti++)
{var wordp=word;if(ti&&args.ti==true)
{wordp=wordp.replace(/ī$/,"i").replace(/ā$/,"i").replace(/ū$/,"i").replace(/n$/,"").replace(/n$/,"ṃ");}
if(pi)
{if(wordp.search(/pi$/)==-1)continue;wordp=wordp.replace(/pi$/,"");}
if(vy)
{if(wordp.match(/vy/))wordp=wordp.replace(/vy/g,'by')
else if(wordp.match(/by/))wordp=wordp.replace(/by/g,'vy')
else continue;}
var m=exactMatch(wordp)||fuzzyMatch(wordp);if(m){matches.push(m);if(pi)matches.push({"base":"pi","meaning":"too"});return matches;}}
return null;}
function matchPartial(word,maxlength){for(var vy=0;vy<2;vy++)
{var wordp=word;if(vy)
{if(wordp.match(/vy/))wordp=wordp.replace(/vy/g,'by')
else if(wordp.match(/by/))wordp=wordp.replace(/by/g,'vy')
else continue;}
if(!maxlength)maxlength=4;for(var i=0;i<word.length;i++){var part=word.substring(0,word.length-i);if(part.length<maxlength)break;if(typeof(sc.data.piLookup[part])=='object'){var meaning=sc.data.piLookup[part][1];return{"base":part,"meaning":meaning,"leftover":word.substring(word.length-i,word.length)}}}}}
function exactMatch(word)
{if(typeof(sc.data.piLookup[word])=='object'){var meaning=sc.data.piLookup[word][1]+' ('+sc.data.piLookup[word][0]+')';return{"base":word,"meaning":meaning};}
return null;}
function fuzzyMatch(word){var end=sc.data.piEndings;for(var i=0;i<end.length;i++){if(word.length>end[i][2]&&word.substring(word.length-end[i][0].length,word.length)===end[i][0]){var orig=word.substring(0,word.length-end[i][0].length+end[i][1])+end[i][3];if(typeof(sc.data.piLookup[orig])=='object'){var meaning=sc.data.piLookup[orig][1]+' ('+sc.data.piLookup[orig][0]+')';return{"base":orig,"meaning":meaning};}}}
return null;}
function _IterPermissions(permissables){if(!permissables)
return undefined;var tmp=[];if(permissables.indexOf('element')!=-1)
tmp.push(1);if(permissables.indexOf('text')!=-1)
tmp.push(3);if(permissables.indexOf('comment')!=-1)
tmp.push(8);if(permissables.indexOf('document')!=-1)
tmp.push(9);if(tmp.length>0)
return tmp;}
function Iter(node,permissables){this.permissables=_IterPermissions(permissables);this.next_node=node;}
Iter.prototype={next_node:undefined,stack:[],permissables:null,next:function(){var current=this.next_node;if(current===undefined)return undefined;if(current.firstChild){this.stack.push(this.next_node);this.next_node=this.next_node.firstChild;}
else if(this.next_node.nextSibling){this.next_node=this.next_node.nextSibling;}
else{while(this.stack.length>0)
{var back=this.stack.pop();if(back.nextSibling)
{this.next_node=back.nextSibling;break;}}
if(this.stack.length==0)this.next_node=undefined;}
if(!this.permissables)
return current;if(this.permissables.indexOf(current.nodeType)!=-1)
return current;return this.next()}}
function nextInOrderByType(node,nodeType){while(true){var node=nextInOrder(node);if(node===undefined)return
if(node.nodeType==nodeType){return node}}}
function nextInOrderBySelector(node,selector){while(true){var node=nextInOrder(node);if(node===undefined)return
if($(node).is(selector))return node;}}
function nextInOrder(node){if(node.firstChild){node=node.firstChild;}
else if(node.nextSibling){node=node.nextSibling;}
else{while(true){node=node.parentNode;if(!node){return undefined;}
if(node.nextSibling){node=node.nextSibling;break;}}}
return node}
function previousInOrder(node,permissables){if(node.previousSibling){node=node.previousSibling;while(node.lastChild)
node=node.lastChild;}else if(node.parentNode){node=node.parentNode;}else{return undefined;}
if(!permissables)
return node;if(typeof permissables=='number'){if(node.nodeType==permissables)
return node;}
else if(typeof permissables=='string'){if($(node).is(permissables))return node;}
else if(permissables.indexOf(node.nodeType)!=-1)
return node;return previousInOrder(node,permissables);}
var sc=window.sc||{}
sc.classes={margin:{"as":"Page numbers in Yamada, 1972.","bl":"(Not defined in GRETIL source.)","bps":"Buddhist Publication Society","bjt":"Buddha Jayanthi Tipitaka","eno89":"Paragraph numbers in Enomoto, 1989.","fuk03":"Page numbers in Fukita, 2003","fol":"Folio number in the manuscript.","gatha-number":"Verse number.","gatn":"","gbm":"Section numbers in Gilgit Buddhist Manscripts.","gno78":"Paragraph numbers in Gnoli, 1978.","har04":"Paragraph number in Hartmann, 2004.","hoe16":"Verse numbers in Hoernle, 1916.","hos89a":"Paragraph numbers in Hosoda, 1989, “Sanskrit Fragments from the Parivrājakasaṃyukta of the Saṃyuktāgama I.”","hos89b":"Paragraph numbers in Hosoda, 1989, “Sanskrit Fragments from the Parivrājakasaṃyukta of the Saṃyuktāgama II.”","hos91":"Paragraph numbers in Hosoda, 1991.","hs":"(Not defined in GRETIL source.)","kel":"Paragraph numbers in Kelly, Sawyer, and Yareham.","mat85":"Paragraph numbers in Matsumura, 1985.","mat88":"Paragraph numbers for Mahāsudarśanasūtra in Matsumura, 1988.","mit57":"Paragraph numbers in Mittal, 1957.","ms":"Mahāsaṅgīti paragraph number.","ms-pa":"","of":"Paragraph numbers in Otto Franke, 1913.","pts":"Pali Text Society vol/page number.","pts1":"Page number of Pali Text Society, 1st edition.","pts2":"Page number of Pali Text Society, 2nd edition.","pts-cs":"Chapter and section of Pali Text Society editions.","pts-vp-en":"Vol/page of the Pali Text Society translation.","pts-vp-pi":"Vol/page of the Pali Text Society Pali edition.","pts_pn":"Pali Text Society vol/page number.","pts-p-pi":"Pali Text Society page number for the Pali text.","roth":"Paragraph numbers in Roth, 1970.","san87":"Paragraph numbers in Sander, 1987.","san89":"Paragraph numbers in Sander, 1987.","sc":"Sutta Central paragraph number.","sen82":"Section and paragraph numbers in Senart, 1882.","sht":"References for SHT fragments.","snp-vagga-section-verse":"Chapter, section, and verse number within the section.","snp-vagga-verse":"Chapter, and verse number within the chapter.","t":"Volume, page, column, and line number in the Taishō canon.","titus":"","t-linehead":"Volume, page, column, and line number in the Taishō canon.","ud-sutta":"Sutta number.","ud-vagga-sutta":"Chapter/sutta number.","tri62":"Sūtra and paragraph number in Tripāṭhī, 1962.","tri95":"Section and paragraph number in Tripāṭhī, 1995.","tu":"","uv":"Chapter and verse numbers for the Udānavarga.","vai58":"Page numbers in Vaidya, 1958.","vai59":"Page and line numbers in Vaidya, 1959.","vai61":"Page and line numbers in Vaidya, 1961.","verse-num-pts":"Verse number in the Pali Text Society edition.","vimula":"","vn":"Vietnamese translation paragraph number.","wal48":"Paragraph numbers for sondertext in Waldschmidt, 1948 (ST.ii).","wal50":"Paragraph numbers in Waldschmidt, 1950 (etc.).","wal52":"Paragraph numbers in Waldschmidt, 1952, 1956, 1960.","wal55b":"Paragraph numbers in Waldschmidt, 1955b, “Die Einleitung des Saṅgītisūtra.”","wal57c":"Paragraph numbers in Waldschmidt, 1957c, “Das Upasenasūtra.”","wal58":"Paragraph numbers in Waldschmidt, 1958.","wal59a":"Paragraph numbers in Waldschmidt, 1959a, “Kleine Brahmi-Schriftrolle.”","wal60":"Paragraph numbers in Waldschmidt, 1960/1.","wal61":"Paragraph numbers for sondertext in Waldschmidt, 1961 (ST.i).","wal68a":"Paragraph numbers in Waldschmidt, 1958a, “Drei Fragmente buddhistischer Sūtras aus den Turfanhandschriften.”","wal70a":"Paragraph numbers in Waldschmidt, 1970a, Buddha frees the disc of the moon.","wal70b":"Paragraph numbers in Waldschmidt, 1970b, “Fragment of a Buddhist Sanskrit text on cosmogony.”","wal76":"Paragraph numbers in Waldschmidt, 1976.","wal78":"Paragraph numbers in Waldschmidt, 1978.","wal80c":"Paragraph numbers in Waldschmidt, 1980c, “On a Sanskrit version of the Verahaccāni Sutta.”","wp":"Wisdom Publications paragraph number.","yam72":"Paragraph numbers in Yamada, 1972."},popup:{"pub":"","var":"","rdg":"","cross":"","end":""},content:{"add":"Text added by the editor or translator for clarification.","altAcronym":"PTS 1998 (Somaratne) edition of SN Vol I.","altVolPage":"Alternative PTS or Taisho numbering.","corr":"Reading corrected by the editor.","dp":"Verse numbers for Dhammapada.","gap":"Gap in the manuscript.","gloss":"Definition of term.","jataka":"An embedded Jātaka story.","precision":"Estimated precision of this location (1 = known, 6 = unknowable)","pe":"Instructions for expanding text supplied by the editor or translator.","expanded":"Text expanded by editor or translator although elided in original.","sic":"Apparently incorrect reading determined by the editor.","skt-mg-bu-pm":"Rule numbers in the Sanskrit Mahāsaṅghika Bhikhhu Pātimokkha.","supplied":"Text hypothetically reconstructed by the editor or translator.","suppliedmetre":"Metre reconstructed by the editor.","surplus":"Surplus text.","sutta-parallel":"Passage also found in the Sutta Pitaka.","term":"Defined term.","unclear":"Unclear reading."}}
sc.volPrefixMap={'da':'i','ma':'i','ea':'ii','ea-2':'ii','sa':'ii','sa-2':'ii','sa-3':'ii','zh-mg':'xxii','zh-mi':'xxii','zh-dg':'xxii','zh-mi':'xxii','zh-sv':'xxiii','zh-ka':'xxiv','t':[[0,98,'i'],[102,151,'ii'],[152,154,'iii'],[197,212,'iv'],[499,515,'xiv'],[605,605,'xv'],[713,715,'xvi'],[741,802,'xvii'],[1245,1362,'xxi'],[1421,1428,'xxii'],[1435,1444,'xxii'],[1448,1451,'xxiv'],[1507,1509,'xxv'],[1521,1537,'xxvi'],[1545,1545,'xxvii'],[1548,1548,'xxviii']]}
sc.mode={}
sc.data={}
sc.jsBaseUrl=$('script[src*="js/"]').last().attr('src').match(/((.*\/|^)js\/)/)[0];$(document).ready(function(){var images=$("img");images.unveil(50);$("details").details()
if(!$.fn.details.support){$("details").addClass('no-details').on('open.details',function(){$(this).attr('open',true);}).on('close.details',function(){$(this).attr('open',false);});}
if($('.sutta').length>0){sc.mode.pali=($('#text').attr('lang')=='pi');sc.sidebar.init();sc.init();}
var parallelCitationLabel=$('#parallel-citation .label');var parallelCitationTextField=$('#parallel-citation > input');var parallelCitationButton=$('#parallel-citation > button');if(parallelCitationButton.length){parallelCitationTextField.on('click',function(){parallelCitationTextField.select();});var clip=new ZeroClipboard(parallelCitationButton,{moviePath:"/js/vendor/ZeroClipboard-1.2.3.swf",hoverClass:"hover",activeClass:"active"});clip.on('load',function(client){parallelCitationLabel.hide();parallelCitationButton.show();client.on('complete',function(client,args){});});clip.on('dataRequested',function(client,args){var text=parallelCitationTextField.val();client.setText(text);});}});function kindAdviceToIEusers(version){if(version>8)return;$("#toc").append('<div style="border: 2px solid red; font-size:11px">You appear to be using an obsolete version of Internet Explorer. Advanced site features are not supported for old browsers and will not work. Please install and use a modern browser such as Google Chrome, Firefox, Internet Explorer 9 or 10 - or install the Google Chrome Frame plugin. <small>Or you know, keep using an antique broswer, and missing out on half the internet.</small></div>');}
if(m=navigator.appVersion.match(/MSIE ([0-9]+)/))
kindAdviceToIEusers(m[1]);var transFuncs={'toRoman':[toRoman,'kā'],'toSinhala':[toSinhala,'කා'],'toThai':[toThai,'กา'],'toMyanmar':[toMyanmar,'ကာ'],'toDevar':[toDevar,'का'],'toSyllables':[toSyllables,'k-ā',"Breaks words into syllables and distinguishes between short and long syllables."]};var syllSpacer='‧';sc.init=function(reset)
{if(reset)scState.restore("clean");buildTextualInformation();if(sc.userPrefs.getPref("textInfo")===true)
{toggleTextualInfo(true);}
var selectedTab=sc.userPrefs.getPref('sidebar-selected-tab');if(selectedTab&&selectedTab!="undefined"){sc.sidebar.selectTab(selectedTab);}
if(sc.mode.pali===true){var lookupToLang=sc.userPrefs.getPref('lookupToLang'),translitFunc=null;prefscript=sc.userPrefs.getPref("script");if(lookupToLang){$('#lookup-to-lang').val(lookupToLang);}
if(prefscript){sc.mode.translitFunc=transFuncs[prefscript][0];}else{sc.mode.translitFunc=transFuncs['toRoman'][0];}
for(f in transFuncs)
if(wordMap[f]==undefined)
wordMap[f]={};if(!sc.mode.translitFunc)sc.mode.translitFunc=transFuncs[0][0];if(sc.userPrefs.getPref("paliLookup")===true)
{if(sc.mode.translitFunc.name=='toSyllables')
{toSyllablesInit();}
enablePaliLookup(true);}else{transliterate(sc.mode.translitFunc);}}}
sc.userPrefs={storage:getStorage(),setRemember:function(value){value=!!value;if(value==false)this.storage.clear();this.storage["remember"]=value;},isRemember:function(){return this.storage["remember"];},setPref:function(pref,value,re_init){this.storage[pref]=value;if(re_init)sc.init(true);},getPref:function(pref){var value=this.storage[pref];if(value==='false')return false;if(value==='true')return true;if(Number(value).toString()===value)return Number(value);return value;},togglePref:function(pref){this.storage[pref]=!this.storage[pref];},clearPref:function(pref){this.storage.removeItem(pref);},clearAll:function(){this.storage.clear();}}
function getStorage(){try{if('sessionStorage'in window&&window['sessionStorage']!=null)
{return sessionStorage;}}catch(e){}
return{};}
function ohInternetExplorerLetMeCountTheWaysILoveYou(){function userFunc(){}
var count=0;if(!('name'in userFunc)){for(var f in transFuncs){transFuncs[f][0].name=f;count+=1;}}};ohInternetExplorerLetMeCountTheWaysILoveYou();sc.headerMenu={lastScreenScroll:0,activate:function(e){$(this).addClass('active');},deactivate:function(e){$(this).removeClass('active');},toggle:function(e){$(this).toggleClass('active');$('header nav').not(this).removeClass('active')},update:function(element,mode){var self=sc.headerMenu,target=$(element.find('[href]').attr('href'));if(mode===undefined&&target.hasClass('active')){mode="hide";}else{mode="show";}
if(mode=="hide"){self.hideAll();}
else{self.hideAll();$('#panel-screen-wrap, #panel').addClass('active')
target.addClass('active');element.addClass('active');setTimeout(self.adjustColumns,50);}},hideAll:function(e){$('#panel  .active, header  .active').removeClass('active');$('#panel-screen-wrap, #panel').removeClass('active');},adjustColumns:function(){var contents=$('.contents.active'),contentsWidth=contents.width(),ruler=$('<span>m</span>').appendTo(contents.find('.column li:last')),t=contents.find('.column:first'),extraWidth=t.outerWidth(true)-t.width(),minWidth=ruler.innerWidth()*12.5+extraWidth,columnWidth=Math.max(minWidth,contentsWidth/5.25)+extraWidth,actualColumnCount=contents.find('.column').length;ruler.remove();fitColumnCount=Math.floor(contentsWidth/columnWidth);columnWidth=contentsWidth/fitColumnCount-10;$('#panel').find('.column').css({'width':columnWidth,'min-width':minWidth});var maxHeight=$(window).height()*0.9-$('header').height(),maxColumnHeight=Math.max.apply(null,contents.find('.column').map(function(){return $(this).offset().top+$(this).outerHeight(true)}))
panelHeight=Math.min(maxColumnHeight+5,maxHeight)
$('#panel').css({'height':panelHeight})},scrollShowHide:function(e){var self=sc.headerMenu,scrollTop=$(document.body).scrollTop(),scrollAmount=scrollTop-self.lastScreenScroll;self.lastScreenScroll=scrollTop;if(scrollTop==0){$('header').removeClass('retracted');}
else{$('header').addClass('retracted');self.hideAll();}}}
setTimeout(function(){$('header nav a').each(function(){$(this).attr('href','#'+$(this).attr('href').replace(/^\.*\//,'').replace('.html',''));});$('header nav').on('click',function(){sc.headerMenu.update($(this));return false});$('#panel-screen-wrap').on('click',function(e){if($(e.target).is('a'))
return true;sc.headerMenu.hideAll();return false}).on('mousewheel',function(e){if(e.target==this){sc.headerMenu.hideAll();return false;}
return true})
$(window).on('ready resize',sc.headerMenu.adjustColumns);$(window).scroll(sc.headerMenu.scrollShowHide);$('#panel').scrollLock();});sc.sidebar={node:$('#sidebar'),init:function(){var self=this;$('#toc').remove();if($('#text').length>0){$('#toc').remove();}else{return}
$('#text').find('.next, .previous, .top').remove();this.doMenu('#navigation-tab > .inner-wrap');this.doMetadata('#metadata-tab > .inner-wrap');this.node.show().easytabs({animate:false,tabs:'.tabs > li',updateHash:false});this.node.on('easytabs:before',function(e,$clicked,$target){sc.userPrefs.setPref('sidebar-selected-tab',$target.attr('id'));sc.trackEvent($clicked.text());});$('#sidebar-dongle').on('click',function(){if(self.isVisible()){self.hide();sc.trackEvent('sidebar-hide')}else{self.show();sc.trackEvent('sidebar-show')}
return false});self.node.on('click',function(e){if(!$(e.target).is('div'))return true;self.hide();sc.trackEvent('sidebar-hide')});self.bindButtons();scState.save("clean");if($.cookie('t-line-by-line')){self.toggleLineByLine();}},isVisible:function(){return this.node.hasClass('active');},show:function(){this.node.addClass('active');sc.userPrefs.setPref('sidebar',true);},hide:function(){this.node.removeClass('active');sc.userPrefs.setPref('sidebar',false);},selectTab:function(tab){this.node.easytabs('select','#'+tab);},bindButtons:function(){$('#text-info').click(toggleTextualInfo);$('#pali-lookup').click(togglePaliLookup);for(f in transFuncs){$('#'+f).click(transliterateHandler);}
$('#lookup-to-lang').change(function(){sc.userPrefs.setPref('lookupToLang',$(this).val());if(sc.userPrefs.getPref("paliLookup")===true){sc.init(true);}});$('#t-line-by-line').click(this.toggleLineByLine);this.initChineseLookup();},toggleLineByLine:function(e){var brs=$('br.t-br');if(brs.length){brs.remove();$('#text').removeClass('line-by-line');$.removeCookie('t-line-by-line');}else{$('.t').before('<br class="t-br">');$('br + br.t-br').remove();$('#text').addClass('line-by-line');$.cookie('t-line-by-line',1)}},initChineseLookup:function(){if($('#zh2en').length==0)return;sc.zh2enLookup.init('#zh2en','#text');},disableControls:function(){$('#textual-controls button').attr('disabled','disabled');},enableControls:function(){$('#textual-controls button').removeAttr('disabled');},doMenu:function(target,headings){var self=this,start=Date.now()
if(!headings){headings=$('#text').find('h2,h3,h4,h5,h6');}
var patimokkhaUid=($('section.sutta[id*=-pm]').attr('id'))
if(patimokkhaUid){headrex=/(.*)/;}else{headrex=/[ivx0-9]{1,5}[.:] \(?([^(]+)/i;}
adjustment=6
headings.each(function(){adjustment=Math.min(this.tagName.replace('H','')-1,adjustment)})
menu=['<ul>']
currentDepth=1
seen={null:1}
headings.each(function(){depth=this.tagName.replace('H','')-adjustment;while(depth>currentDepth){menu.push('<li><ul>');currentDepth++;}
while(depth<currentDepth){menu.push('</ul></li>')
currentDepth--;}
headtext=$(this).text();m=headtext.match(headrex);if(m){menutext=m[0].trim();}else{menutext=headtext;}
menutext=menutext.toTitleCase();var ref,existingAnchor=$(this).find('[id]').first();if(existingAnchor.length&&existingAnchor.text()){ref=existingAnchor.attr('id');}else{ref=$(this).attr('id');if(!ref){var asciified=(sc.util.asciify(menutext.toLowerCase())||menutext).replace(/ /g,'-'),oref=ref=asciified;while(ref in seen){ref=oref+++i;}}}
menu.push('<li><a href="#{}">{}</a></li>'.format(ref,menutext));if(existingAnchor.length){existingAnchor.attr({href:"#table-of-contents"});}else{$(this).wrapInner('<a id="{}" href="#table-of-contents" />'.format(ref))}});if(menu.length>1){menu.push('</ul>');$('<div id="table-of-contents">').append(menu.join('')).appendTo(target);}
if(patimokkhaUid){var isRule=/(?:pj|ss|an|np|pc|pd|sk|as)\d+/;$('h4').each(function(){var h4=$(this),id=h4.find('[id]').attr('id');if(!isRule.test(id))return;href='/{}_{}'.format(patimokkhaUid,id);h4.append('<a href="{}" class="details" title="Go to parallels page">▶</a>'.format(href))});}},doMetadata:function(target){$(target).append($('#metaarea'));},messageBox:{show:function(message,args){$('#message-box .message:hidden').remove();args=args||{};var msgObj=$('<div class="message"><a class="remove" onclick="$(this).parent().fadeOut(); return true;">×</a>').append(message).attr('id',args.id);$('#message-box').append(msgObj);if(args.timeout){setTimeout(function(){msgObj.fadeOut();},args.timeout)}},remove:function(id){$('#message-box').find('[id="'+id+'"]').fadeOut();},clear:function(){$('#message-box > .message').fadeOut();}}}
if(String.prototype.trimLeft===undefined)
{String.prototype.trimLeft=function(){return this.replace(/^\s+/,"");}}
sc.formatter={init:function(){$(window).resize(function(){});$(document).on('keydown',sc.formatter.deathToTheBeast);setTimeout(this.navMenuFixer,1000);this.apply();this.operaFix();this.highlightBookmark();this.toolsMagic();setTimeout(this.acro_expander,500);$(window).resize(this.overlapperFixer);},apply:function(){$("tr").filter(":even").addClass("even");sc.formatter.quoteHanger();},shove:function(){var start=(new Date()).getTime();$("q").each(function(){sc.formatter.rePosition($(this))});},operaFix:function(){if('opera'in window){if('version'in window.opera&&window.opera.version>12.2)
{return;}
$(document.body).addClass('badfonts');}},rePosition:function($element){return $element;var setLeft=false;var offset=$element.offset();var width=$element.innerWidth();if(offset.left<1){offset.left=1;$element.offset(offset).innerWidth(width+1);setLeft=true;}
if(offset.left+width>$(document).width())
{offset.left=$(document).width()-(width+2);$element.offset(offset).innerWidth(width+1);}
return $element;},quoteHanger:function(){$('p').each(function(){children=this.childNodes
node=this.childNodes[0];if(!node)return;while(node.nodeType==1){if(node.nodeName=='A'){node=node.nextSibling}
else{node=nextInOrder(node);}
if(!node)return;}
if(node.nodeType==3){text=node.nodeValue.trimLeft()
var firstChar=text[0];if(firstChar=='“'||firstChar=='‘')
{var secondChar=text[1];if(secondChar=='“'||secondChar=='‘')
{node.nodeValue=text.slice(2);$(this).prepend('<span class="dsquo">'+firstChar+secondChar+'</span>');}else{node.nodeValue=text.slice(1);if(firstChar=='‘'){$(this).prepend('<span class="squo">'+firstChar+'</span>');}else{$(this).prepend('<span class="dquo">'+firstChar+'</span>');}}}}});},markOfTheBeast:0,deathToTheBeast:function(event){if(event.which==77&&event.ctrlKey==true)
{if(!(window.scState&&window.Iter))return;textualControls.disable()
var iter=new Iter(document.body,'text');var startTime=Date.now();while(node=iter.next())
{if(node.nodeValue)
{if(sc.formatter.markOfTheBeast%2==0){node.nodeValue=node.nodeValue.replace(/ṃ/g,'ṁ').replace(/Ṃ/g,'Ṁ');}else{node.nodeValue=node.nodeValue.replace(/ṁ/g,'ṃ').replace(/Ṁ/g,'Ṃ');}}}
textualControls.enable();if(sc.formatter.markOfTheBeast%2==0){}else{var num=1+Math.ceil(sc.formatter.markOfTheBeast/2);var suffix='th';if(num%10==1&&num%100!=11)suffix='st';if(num%10==2&&num%100!=12)suffix='nd';if(num%10==3&&num%100!=13)suffix='rd';}
sc.formatter.markOfTheBeast+=1}},highlightBookmark:function(){var toHighlight=[window.location.hash],i=0;while(i<toHighlight.length)
{e=$(toHighlight[i].replace(/\./g,'\\.'));if(e.length>0){e.addClass('bookmarkeded');alsoIds=e.attr('data-also-ids');if(alsoIds){ids=alsoIds.split(/,\s*/g);for(j in ids){toHighlight.push('#'+ids[j]);}}}
i++;if(i>100)return;}},toolsMagic:function(){if($('.tools').length==0){return}
$('[data-allowed]').on('change',function(e){var filename=this.value,types=$(this).attr('data-allowed').split(' ,'),m=filename.match('.+[.](.+)');if(m&&types.indexOf(m[1].toLowerCase())!=-1){return}
this.value=null;if(!m){alert('Unknown filetype, only {} allowed'.format(types.join(', ')));}
else{alert('Filename extension .{} not allowed, only .{} allowed'.format(m[1].toLowerCase(),types.join(', .')));}});tidy={tidy:$('[value=html5tidy]'),level:$('[name=tidy-level]'),extra:$('#tidy-extra input'),flags:$('[name=tidy-flags]'),updateFlags:function(e){var self=tidy,flags=[];if(self.tidy[0].checked){$('#tidy ul input, #tidy textarea').removeAttr('disabled');}else{$('#tidy ul input, #tidy textarea').attr('disabled','disabled');}
flags.push(self.tidy.attr('data-flags'));for(var i=0;i<self.level.length;i++){flags.push($(self.level[i]).attr('data-flags'));if(self.level[i].checked)
break;}
for(var i=0;i<self.extra.length;i++){if(self.extra[i].checked)
flags.push($(self.extra[i]).attr('data-flags'));};self.flags.val(flags.join(' ').replace(/  +/g,' ').trim())},init:function(){var self=this;$('#tidy input, [name=cleanup]').on('change',self.updateFlags);self.updateFlags();}}
decruft={decruft:$('[name=decruft]'),what:$('[name^=decruft-]'),discard:$('[name=decruft-discard]'),unwrap:$('[name=decruft-unwrap]'),update:function(e){var self=decruft,selectors=[];for(var i=0;i<self.what.length;i++){if(self.what[i].checked){selectors.push(self.what[i].value);}}
self.discard.val(selectors.join(', '))},init:function(){this.update();this.what.on('change',this.update);}}
$('[name=tidy-file]').on('change',function(e){var self=e.target;if(e.target.value.search(/\.zip$/i)==-1){self.value=null;alert('Only zip files are acceptable.','Go away');}});function updateBoundStatus(target){var boundElements=$($(target).attr('data-bound'));if(target.checked){boundElements.removeAttr('disabled')}
else{boundElements.attr('disabled','disabled')}}
$('[data-bound]').on('change',function(e){updateBoundStatus(this)});$(document).on('ready',function(){$('[data-bound]').each(function(){updateBoundStatus(this)});});$('[name=show]').on('change',function(e){$('.entry').show();if(e.target.value!='all')
$('.entry').not(e.target.value).hide();});if($('#tidy').length)
tidy.init();if($('#decruft').length)
decruft.init();},alignToParentMenu:function(ul){var parent=ul.parent()},navMenuFixer:function(){var bodyWidth=$(document.body).width(),self=sc.formatter;function checkOkay(ul){var ul=$(this);var width=ul.width(),offset=ul.offset(),leftExtent=offset.left+width;if(leftExtent>bodyWidth){var parent=ul.parent(),newLeftOffset=parent.offset().left-width;if(newLeftOffset<0){newLeftOffset=bodyWidth-width-4;}
ul.offset({left:newLeftOffset});}
ul.children().children('ul').each(checkOkay);}
$('#page-header-menu > nav > ul').each(checkOkay);if(self.navMenuFixer.first==undefined){$(window).resize(function(){$('#page-header-menu ul').removeAttr('style');self.navMenuFixer();});self.navMenuFixer.first=true;}}}
sc.formatter.init();sc.notes={rowRex:/ \| /,varRex:/^(\(.*?\)|[^\(]+)(.*)/,edsRex:self.edsRex,robrContentsRex:/\((.*?)\)([^\)]*)/g,xrefRex:/\^([\w.\-]+(?:#\w+)?)\s*(?:\[(.*?)\])?(.*)/g,sourceAttr:'title',init:function(){$('#text').on('mouseover','.var, .cross',sc.notes.markupNote);},markupNote:function(event){"use strict";var self=sc.notes;if($(event.target).find('.deets').length)return;var $target=$(event.target),noteData=$target.attr(self.sourceAttr);if($target.is('.var')){$target.append(self.markupVarNote(noteData));}else if($target.is('.cross')){$target.append(self.markupXRefNote(noteData));}
$target.attr(self.sourceAttr,null);},markupVarNote:function(noteData){var self=this;return $('<table class="deets">').append(noteData.split(self.rowRex).map(function process_row(row_text){var m=row_text.match(self.varRex),variant=m[1],comment=m[2],out;if(variant&&!comment){out='<tr><td colspan=2>{}</td></tr>'.format(self.markupComment(variant));}else{out='<tr><td>{}</td><td>{}</td>'.format(variant,self.markupComment(comment));}
return $(out);}));},markupXRefNote:function(comment){var self=this,note;rows=comment.split(self.rowRex).map(function(row){var markedRow=row.replace(self.xrefRex,self.xRefToHTML);if(markedRow==row){markedRow='<td colspan=2>'+row+'</td>'}
return'<tr>'+markedRow+'</tr>';})
return'<table class="deets">'+rows.join('\n')+'</table>'
return ul;},markupComment:function(comment){var self=this;comment=comment.replace(self.robrContentsRex,function(m,contents,leftovers){if(contents){contents='<ul>'+contents.split(/,\s*/g).map(function(part){part=part.replace(self.edsRex,function(ed){var res=self.editionsExpansionData[ed];if(!res){ed}
return res[1];});return'<li>'+part+'</li>';}).join('\n')+'</ul>';}
return contents+leftovers;});return comment},xRefToHTML:function(m,urlComp,title,desc){var parts=urlComp.split('#'),uid=parts[0],bm=(parts.length>1)?parts[1]:null,href='./'+uid+(bm?'#'+bm:''),acro=sc.util.uidToAcro(uid);if(desc){title=desc.replace(/^[\d–.\u2060]*\s*/,'');}
return'<td><a class="xref" href="{}">{}</a></td><td>{}</td>'.format(href,acro,title)},editionsExpansionData:{'c-a':["C-A","Chaṭṭhasaṅgīti Piṭakaṃ Atthakathā"],'c1':["C1","Chaṭṭhasaṅgīti Piṭakaṃ 2496–2499 (1952–1955)"],'c2':["C2","Chaṭṭhasaṅgīti Piṭakaṃ 2nd ed. 2500–2506 (1956–1962)"],'c3':["C3","Chaṭṭhasaṅgīti Piṭakaṃ (1997)"],'mr':["Mr","Maramma Tipiṭaka 2541 (1997)"],'si':["Si","Sinhala Tipiṭaka 2501 (1957)"],'km':["Km","Phratraipiṭakapāḷi 2501–2512 (1958–1969)"],'maku':[" Maku","Mahāmakurājāvidyālai 2466 (1923)"],'pts-a':["PTS-A","Pali Text Society Atthakathā"],'pts1':["PTS 1","Pali Text Society 1st ed. 2424–2535 (1881–1992)"],'pts2':["PTS 2","Pali Text Society 2nd ed. 2517–2541 (1974–1998)"],'s-a':["S-A","Syāmaraṭṭhassa Tepiṭakaṃ Atthakathā"],'s1':["S 1","Chulachomklao Pāḷi Tipiṭaka 2436 (1893)"],'s2':["S 2","Syāmaraṭṭhassa Tepiṭakaṃ 2469–2471 (1926–1928)"],'s3':["S 3","Syāmaraṭṭhassa Tepiṭakaṃ 2538 (1995)"],'bj':["Bj","Buddhajayantītripiṭakagranthamālā 2501–2531 (1957–1989)"],'bj-a':[" Bj A","Buddhajayantītripiṭakagranthamālā Atthakathā)"]},}
sc.notes.edsRex=(function(){var edUids=[];for(uid in sc.notes.editionsExpansionData){edUids.push(uid);}
edUids.sort(function(e){return e.length});return RegExp('\\b({})\\b'.format(edUids.join('|')),'g');})()
$(document).ready(sc.notes.init);sc=sc||{};sc.zh2enLookup={buttonId:"zh2en",chineseClasses:"P, H1, H2, H3",active:false,dictRequested:false,chineseIdeographs:/[\u4E00-\u9FCC　。]/g,chinesePunctuation:/[　、。]/g,loading:false,queue:[],markupTarget:null,originalHTML:null,mouseIn:0,currentLookup:null,lastCurrentLookup:null,init:function(button,markup_target){this.markupTarget=$(markup_target).addClass('zh2enLookup')[0];this.button=$(button).on('click',sc.zh2enLookup.toggle);},before:function(){self=sc.zh2enLookup;sc.sidebar.messageBox.clear();var message='<p>Loading Chinese to English dictionary data, this may take some time (~1MB)</p>'
sc.sidebar.messageBox.show(message,{id:'zh_msg_loading'});},done:function(){var self=sc.zh2enLookup;sc.sidebar.messageBox.remove('zh_msg_loading');var message='<p>Chinese to English lookup activated.</p>\
            <p>Use the mouse or left, right arrow keys to navigate the text (shift-right to advance more).</p>\
            <p>A red border indicates modern usage, possibly unrelated to early Buddhist usage.</p>'
sc.sidebar.messageBox.show(message);self.currentLookup=$('span.lookup:first')[0];self.lastCurrentLookup=self.currentLookup;},fail:function(jqXHR,textStatus,errorThrown){sc.sidebar.messageBox.remove('zh_msg_loading');var msg='<div>Failed to download dictionary data because of <em>{}</em></div>'.format(textStatus);sc.sidebar.messageBox.show(msg,{timeout:10000});},activate:function(){var self=this;if(!this.originalHTML)
this.originalHTML=this.markupTarget.innerHTML;if(!this.dictRequested&&!window.sc.zh2enData)
{self.before();this.dictRequested=true;sc.zh2enDataScripts.forEach(function(url,i){var jqXHR=jQuery.ajax({url:sc.jsBaseUrl+url,dataType:"script",crossDomain:true,cache:true,timeout:180*1000});if(i==0){jqXHR.done(self.done);jqXHR.fail(self.fail);}});}
this.generateMarkup();$(document).on('mouseenter','span.lookup',function(){self.mouseIn++;})
$(document).on('mouseleave','span.lookup',function(){self.mouseIn--;})
$(document).on('keyup','',function(e){if(!self.mouseIn)
return
if(e.keyCode==39||e.keyCode==37)
e.preventDefault();if(e.keyCode==39){var from=self.currentLookup;if(self.lastCurrentLookup&&e.shiftKey)
from=self.lastCurrentLookup;var next=nextInOrder(from,'span.lookup:not(.punctuation)');if(!next)
return
self.setCurrent(next)}else if(e.keyCode==37){var prev=previousInOrder(self.currentLookup,'span.lookup:not(.punctuation)');if(!prev)
return
self.setCurrent(prev);}});},deactivate:function(){this.markupTarget.innerHTML=this.originalHTML;sc.sidebar.messageBox.clear();sc.sidebar.messageBox.show('<p>Lookup disabled.</p>',{'timeout':5000});},generateMarkup:function(){if(this.button)
this.button.attr('disabled','disabled');this.markupGenerator.start();$(document).on('mouseenter','span.lookup',sc.zh2enLookup.lookupHandler);},markupGenerator:{start:function(){this.node=sc.zh2enLookup.markupTarget;this.startTime=Date.now();this.step();},step:function(){for(var i=0;i<10;i++){if(this.node===undefined){this.andfinally();return;}
var nextNode=nextInOrderByType(this.node,document.TEXT_NODE)
this.textNodeToMarkup(this.node);this.node=nextNode;}
setTimeout('sc.zh2enLookup.markupGenerator.step.call(sc.zh2enLookup.markupGenerator)',5);},andfinally:function(){self=sc.zh2enLookup;if(self.button)
self.button.removeAttr('disabled');},textNodeToMarkup:function(node){if(node===undefined)return;var text=node.nodeValue;if(!text||text.search(sc.zh2enLookup.chineseIdeographs)==-1){return}
var proxy=document.createElement("span");node.parentNode.replaceChild(proxy,node);proxy.outerHTML=this.toLookupMarkup(text);},toLookupMarkup:function(input)
{var self=sc.zh2enLookup,chinesePunctuation=self.chinesePunctuation;return input.replace(self.chineseIdeographs,function(ideograph){var eclass='lookup';if(ideograph.match(chinesePunctuation))
eclass+=' punctuation';return'<span class="'+eclass+'">'+ideograph+'</span>'});}},toggle:function(){self=sc.zh2enLookup;self.active=!self.active;if(self.active)self.activate()
else self.deactivate();},setCurrent:function(node){var self=this,graphs='',nodes=$(),iter=new Iter(node),i
$('.popup').remove()
$('.current_lookup').removeClass('current_lookup fallback')
this.currentLookup=node
while(graphs.length<10){if($(node).is('span.lookup')){graphs+=$(node).text();nodes.push(node)}
node=nextInOrder(node,document.ELEMENT_NODE)
if(!node){break}}
if(!graphs)
return
var popup=['<div class="popup"><table>'],first=true,fallback=false;for(i=graphs.length;i>0;i--){var snip=graphs.slice(0,i)
if(snip in sc.zh2enData){popup.push(self.lookupWord(snip))
if(first){first=false;nodes.slice(0,i).addClass('current_lookup')
this.lastCurrentLookup=nodes[i-1];}}else if(i==1&&snip in sc.zh2enFallbackData){popup.push(self.lookupWord(snip))
popup[0]='<table class="popup fallback">'
fallback=true
if(first){first=false;nodes.slice(0,i).addClass('current_lookup fallback')
this.lastCurrentLookup=nodes[i-1];}}}
if(this.lastCurrentLookup==null)
this.lastCurrentLookup=this.currentLookup;if(first)
return
popup.push('</table></div>')
popup=self.popup(nodes[0],popup.join('\n'))},lookupHandler:function(e){sc.zh2enLookup.setCurrent(e.target);},lookupWord:function(graph){var out="";graph=graph.replace(/\u2060/,'');if(sc.zh2enData[graph])
{var href="http://www.buddhism-dict.net/cgi-bin/xpr-ddb.pl?q="+encodeURI(graph);return('<tr><td class="ideograph"><a href="'+href+'">'+graph+'</a></td> <td class="meaning"> '+sc.zh2enData[graph][0]+': '+sc.zh2enData[graph][1]+'</td></tr>');}else if(sc.zh2enFallbackData[graph]){return('<tr class="fallback"><td class="ideograph"><a>'+graph+'</a></td> <td class="meaning"> '+sc.zh2enFallbackData[graph][0]+': '+sc.zh2enFallbackData[graph][1]+'</td></tr>')}
return"";},popup:function(parent,popup){var offset,docWith,dupe,docWidth,isAbsolute=false
if('left'in parent||'top'in parent){offset=parent
offset.left=offset.left||0
offset.top=offset.top||0
parent=document.body
isAbsolute=true}else{parent=$(parent)
offset=parent.offset()}
popup=$(popup)
docWidth=$(document).width()
dupe=$(popup).clone()
$(this.markupTarget).append(dupe)
var popupWidth=dupe.innerWidth(),popupHeight=dupe.innerHeight();dupe.remove()
if(!isAbsolute){offset.top+=parent.innerHeight()-popupHeight-parent.outerHeight();offset.left-=popupWidth/2;}
if(offset.left<1){offset.left=1;popup.innerWidth(popupWidth+5);}
if(offset.left+popupWidth+5>docWidth)
{offset.left=docWidth-(popupWidth+5);}
popup.offset(offset)
$(this.markupTarget).append(popup)
popup.offset(offset)
popup.mouseleave(function(e){$(this).remove()});return popup;}}
sc.zh2enDataScripts=['data/zh2en-maindata-bb7bc2d2c3.min.js','data/zh2en-fallback-a7f9f034b2.min.js'];sc.util.expand_uid_data={"t":["T","Taishō"],"mil":["Mil","Milindapañha"],"sa-3":["SA-3","Saṃyuktāgama (3rd)"],"divy":["Divy","Divyāvadāna"],"cases":["cases","cases"],"mn":["MN","Majjhima Nikāya"],"sk":["Sk","Sekhiyā"],"np":["NP","Nissaggiyā Pācittiyā"],"mnd":["Mnd","Mahāniddesa"],"s-a":["S-A","Syāmaraṭṭhassa Tepiṭakaṃ Atthakathā"],"s1":["S 1","Chulachomklao Pāḷi Tipiṭaka 2436 (1893)"],"kf":["Khot","Khotanese fragments"],"fr":["Fr","French"],"mi":["Mi","Mahīśāsaka"],"gr":["Gr","Gāndhārī"],"uv":["UV","Udānavarga"],"ka":["Ka","Kāśyapīya"],"es":["Es","Spanish"],"pts-a":["PTS-A","Pali Text Society Atthakathā"],"ja":["Ja","Jātaka"],"ru":["Ru","Russian"],"dn":["DN","Dīgha Nikāya"],"sf":["SF","Other Fragments"],"pf":["Prak","Prākrit fragments"],"pn":["Pn","Pakiṇṇaka"],"vagga":["Vagga","Vagga"],"mvu":["Mvu","Mahāvastu"],"tf":["Tf","Turfan"],"dg":["Dg","Dharmaguptaka"],"km":["Km","Phratraipiṭakapāḷi 2501–2512 (1958–1969)"],"bu":["Bu","Bhikkhu"],"tv":["Tv","Theravāda"],"c2":["C2","Chaṭṭhasaṅgīti Piṭakaṃ 2nd ed. 2500–2506 (1956–1962)"],"kv":["Kv","Kathāvatthu"],"mr":["Mr","Maramma Tipiṭaka 2541 (1997)"],"finot":["Finot","Finot"],"gd":["Gd","Garudhamma"],"pts2":["PTS 2","Pali Text Society 2nd ed. 2517–2541 (1974–1998)"],"tib":["Tib",""],"sv":["Sv","Sarvāstivāda"],"ya":["Ya","Yamaka"],"pd":["Pd","Pāṭidesanīyā"],"ss":["Ss","Saṅghādisesā"],"an":["AN","Aṅguttara Nikāya"],"thag":["Thag","Theragāthā"],"sa":["SA","Saṃyuktāgama (1st)"],"my":["My","Burmese"],"bf":["Bf","Bajaur"],"as":["As","Adhikaraṇasamathā"],"svbh":["Svbh",""],"pts1":["PTS 1","Pali Text Society 1st ed. 2424–2535 (1881–1992)"],"t1670b":["T 1670 B","Nāgasena Bhikṣu Sūtra (2nd)"],"ab":["Ab","Abhidhamma"],"it":["It","Itivuttaka"],"bi":["Bi","Bhikkhunī"],"pv":["Pv","Petavatthu"],"kn":["KN","Khuddaka Nikāya"],"vv":["Vv","Vimānavatthu"],"pc":["Pc","Pācittiyā"],"ne":["Ne","Netti"],"ko":["Ko","Korean"],"zh":["Zh","Chinese"],"ay":["Ay","Aniya­ta"],"lal":["Lal","Lalitavistara"],"ma":["MA","Madhyamāgama"],"s3":["S 3","Syāmaraṭṭhassa Tepiṭakaṃ 2538 (1995)"],"vi":["Vi","Vinaya"],"bv":["Bv","Buddhavaṃsa"],"ea":["EA","Ekottarikāgama (1st)"],"pe":["Pe","Peṭakopadesa"],"cp":["Cp","Cariyāpiṭaka"],"snp":["Snp","Sutta Nipāta"],"en":["En","English"],"arv":["Arv","Arthaviniścaya"],"si":["Si","Sinhala Tipiṭaka 2501 (1957)"],"ea-2":["EA2 [T 150A]","Ekottarikāgama (2nd)"],"mu":["Mu","Mūlasarvāstivāda"],"gf":["Gandh","Gāndhārī fragments"],"asc":["Asc","Abhisamācārika"],"sbv":["Sbv","Saṅgha­bheda­vastu"],"mbt":["Mbt","Mahāvyutpatti"],"c1":["C1","Chaṭṭhasaṅgīti Piṭakaṃ 2496–2499 (1952–1955)"],"ap":["Ap","Āpadāna"],"maku":[" Maku","Mahāmakurājāvidyālai 2466 (1923)"],"oa":["T","Other Āgama Sūtras"],"kp":["Kp","Khuddakapāṭha"],"pm":["Pm","Pātimokkha"],"ps":["Ps","Paṭisambhidāmagga"],"dq":["D","Derge/Peking editions"],"de":["De","German"],"conc":["Conc.","Conclusion"],"pp":["Pp","Puggalapaññatti"],"sht":["SHT","SHT fragments"],"kd":["Kd","Khandhaka"],"ud":["Ud","Udāna"],"avs":["Avs","Avadānaśataka"],"sn":["SN","Saṃyutta Nikāya"],"thi-ap":["Thī Ap","Therīapadāna"],"bo":["Bo","Tibetan"],"s2":["S 2","Syāmaraṭṭhassa Tepiṭakaṃ 2469–2471 (1926–1928)"],"c3":["C3","Chaṭṭhasaṅgīti Piṭakaṃ (1997)"],"c-a":["C-A","Chaṭṭhasaṅgīti Piṭakaṃ Atthakathā"],"pvr":["Pvr","Parivāra"],"dt":["Dt","Dhātukathā"],"bj-a":[" Bj A","Buddhajayantītripiṭakagranthamālā Atthakathā)"],"cnd":["Cnd","Cūḷaniddesa"],"bj":["Bj","Buddhajayantītripiṭakagranthamālā 2501–2531 (1957–1989)"],"skt":["Skt","Sanskrit"],"lo":["Lo","Lokuttaravāda"],"upali":["Upali","Upāliparipṛcchā"],"ds":["Ds","Dhammasaṅgaṇī"],"pi":["Pi","Pāli"],"tha-ap":["Tha Ap","Therāpadāna"],"mg":["Mg","Mahāsaṅghika"],"mv":["Mv",""],"uf":["Uigh","Uighur fragments"],"qizil":["Qizil","Qizil"],"da":["DA","Dīrghāgama"],"dhp":["Dhp","Dhammapada"],"pt":["Pt","Paṭṭhāna"],"t1670a":["T 1670 A","Nāgasena Bhikṣu Sūtra (1st)"],"su":["Su","Suttas"],"thig":["Thīg","Therīgāthā"],"up":["Up","Upāyikā"],"vn":["Vn","Vietnamese"],"vb":["Vb","Vibhaṅga"],"pj":["Pj","Pārājika"],"ug":["Ug","Uighur"],"sa-2":["SA-2","Saṃyuktāgama (2nd)"]}
sc.trackEvent=function(params){if(typeof(params)=='string'){params={category:'button',action:'click',label:params}}
if('ga'in window){ga('send',{hitType:'event',eventCategory:params.category,eventAction:params.action,eventLabel:params.label,eventValue:params.value})}else{console.log('Event: Category="{}", Action="{}", Label="{}", Value="{}"'.format(params.category,params.action,params.label,params.value||0));}}
$('main').on('click contextmenu','.file',function(){sc.trackEvent({category:'download',action:'click',label:$(this).attr('href')});})
$('#controls-tab').on('click','.button',function(e){var value=$(e.target).attr('id')||$(e.target).text();if($(this).is('select')){value+='-'+this.value;}
sc.trackEvent(value)});