RewriteEngine on

#   Input:  sutta/lang/
#   Output: /browse.php?show=text&text_acronym=sutta

# Redirect
RewriteRule ^new/(.*) $1 [R]

#Special pages
RewriteRule ^(about|contacts|methodology|bibliography|abbreviations|sutta_numbering|help)/?$ index.php?show=$1 [NC,L]

#Search
RewriteRule ^find(.*)$ search.php$1 [NC,L]

#Divisions
RewriteRule ^(an|avs|cv|da|dhatuk|dhs|div|dn|dq|ea|ea-2|gf|kf|kn|kv|lal|ma|mn|mv|mvu|oa|ot|patth|pf|pp|prv|sa|sa-2|sa-3|sbh|sf|sht|sn|svbh|tc|uf|up|vbh|yam)/?$ browse.php?show=division&uid=$1 [NC,L]

#Fulldivisions
RewriteRule ^(an|avs|cv|da|dhatuk|dhs|div|dn|dq|ea|ea-2|gf|kf|kn|kv|lal|ma|mn|mv|mvu|oa|ot|patth|pf|pp|prv|sa|sa-2|sa-3|sbh|sf|sht|sn|svbh|tc|uf|up|vbh|yam)/full/?$ browse.php?show=fulldivision&uid=$1 [NC,L]

#Subdivisions
RewriteRule ^(an1|an10|an11|an2|an3|an4|an5|an6|an7|an8|an9|cv-nosub|da-nosub|dn-nosub|dp|ea1|ea10|ea11|ea12|ea13|ea14|ea15|ea16|ea17|ea18|ea19|ea2|ea20|ea21|ea22|ea23|ea24|ea25|ea26|ea27|ea28|ea29|ea3|ea30|ea31|ea32|ea33|ea34|ea35|ea36|ea37|ea38|ea39|ea4|ea40|ea41|ea42|ea43|ea44|ea45|ea46|ea47|ea48|ea49|ea5|ea50|ea51|ea52|ea6|ea7|ea8|ea9|gfg-nosub|it|kfg-nosub|kp|ma-nosub|mn-nosub|mv-nosub|pfg-nosub|sa1-100|sa1001-1100|sa101-200|sa1101-1200|sa1201-1300|sa1301-1362|sa2-nosub|sa201-300|sa3-nosub|sa301-400|sa401-500|sa501-600|sa601-700|sa701-800|sa801-900|sa901-1000|sfg-nosub|sht1|sht2|sht3|sht4|sht5|sht6|sht7|sht8|sht9|sn1|sn10|sn11|sn12|sn13|sn14|sn15|sn16|sn17|sn18|sn19|sn2|sn20|sn21|sn22|sn23|sn24|sn25|sn26|sn27|sn28|sn29|sn3|sn30|sn31|sn32|sn33|sn34|sn35|sn36|sn37|sn38|sn39|sn4|sn40|sn41|sn42|sn43|sn44|sn45|sn46|sn47|sn48|sn49|sn5|sn50|sn51|sn52|sn53|sn54|sn55|sn56|sn6|sn7|sn8|sn9|sp|t102-124|t126-149|t150A|t150B|t2-25|t27-98|tib-nosub|ud|ufg-nosub)/?$ browse.php?show=subdivision&uid=$1 [NC,L]

#Text hosted on Sutta Central
RewriteRule ^([^/]+[0-9])/(pi|en|zh|vn|ko)/?(#[^/]*)?$ browse.php?show=text&text_acronym=$1&text_lang=$2 [NC,L]

#Parallels view.
RewriteRule ^([^/]+[0-9])/?$ browse.php?show=parallel&uid=$1 [NC,L]

<IfModule mod_expires.c>
	ExpiresActive On
	ExpiresByType image/jpg "access plus 7 day"
	ExpiresByType image/jpeg "access plus 7 day"
	ExpiresByType image/gif "access plus 7 day"
	ExpiresByType image/png "access plus 7 day"
	ExpiresByType text/css "access plus 7 day"
	ExpiresByType text/x-javascript "access plus 7 day"
	ExpiresByType image/x-icon "access plus 7 day"
  ExpiresByType font/ttf      "access plus 7 day"
  ExpiresByType font/woff     "access plus 7 day"
  ExpiresByType image/svg+xml "access plus 1 day"
  
  ExpiresByType text/html "access plus 1 hour"
  ExpiresByType application/xhtml+xml "access plus 1 hour" 
</IfModule>

<ifModule mod_deflate.c>
  <filesMatch "\.(ttf|otf|svg|js)$">
    SetOutputFilter DEFLATE
  </filesMatch>
</ifModule>
