{% extends "base.html" -%}
{% import 'macros.html' as macros with context %}
{%- block content -%}
<div id='onecol'>
<div>You searched: <strong>{{result.query.query}}</strong>
</div>
{% for category in result.categories -%}

{% if category.type == "dict" -%}
    {% for section in category.sections -%}
        <ul class="terms">
        {% for row in section.results %}
            {% if row.html %}
                <li class="moreresults">{{row.html}}</li>
            {% else %}
                <li><h3>{{row.term}} {{row.number if row.number > 1}} <span class="alt_terms">{{'<span class="alt_terms">(' + row.alt_terms + ')</span>' if row.alt_terms}}</h3>
                {% if result.query.target=='dict' %}
                    {{row.entry}}
                {% else %}
                    <div class=truncate>{{row.entry}}</div>
                {% endif %}
            {% endif %}
        {% endfor %}
        </ul>
    {%- endfor %}
{% endif %}

{% if category.type == "sutta" -%}
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Title</th>
<th>Vol/Page</th>
<th>Parallels</th>
<th class='transcol'>Translations</th>
</tr>
{% for section in category.sections -%}
<tr><td colspan='5' class='subdivision'>{{section.title}}</td></tr>
{% for sutta in section.suttas -%}
{{macros.sutta_row(sutta)}}
{%- endfor %}
{%- endfor %}
</thead>
</table>
{%- endif %}
{% if category.footurl %}
{{category.footurl}}
{% endif %}
{%- endfor %}

</div>
{%- endblock -%}
<script>
$('.entry  p').truncate({max_length: 100});
</script>